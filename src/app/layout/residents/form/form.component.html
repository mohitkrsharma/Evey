<form #f="ngForm" autocomplete="off">
  <mat-card class="mb-24" style="padding: 25px;padding-right: 0;height: 150px;">

    <div class=" w-100 viewresident d-flex responsive align-centerjustify-content-between">
      <div class="profile_pic">
        <img *ngIf="paramId && resident.profile_image"
          src={{resident.profile_image.location?resident.profile_image.location:resident.profile_image}}
          class="img-fluid" alt="profile-pic">
        <!-- <img *ngIf="paramId"
          src="./assets/images/test.jpeg"
          class="img-fluid" alt="profile-pic">  -->
        <button *ngIf="paramId && resident.profile_image" color="primary" mat-mini-fab="" class="mat-primary"
          ng-reflect-color="primary" (click)="file.click()">
          <span>
            <mat-icon _ngcontent-c18="" class="mat-icon material-icons" role="img" aria-hidden="true">edit</mat-icon>
          </span>
          <div class="mat-button-ripple mat-ripple mat-button-ripple-round" matripple="" ng-reflect-centered="false"
            ng-reflect-disabled="false" ng-reflect-trigger="[object HTMLButtonElement]"></div>
          <div class="mat-button-focus-overlay"></div>
          <input #file class="picchangeupload" name="document" type="file" ng2FileSelect accept="image/*"
            [uploader]="uploader" (change)="onFileChanged($event)">
        </button>
        <!-- <img *ngIf="!paramId && addResident" src="./assets/images/149071.png" class="img-fluid" alt="profile-pic"> -->
        <!-- new profile pic starts-->
        <div *ngIf="!paramId"
          class="avatar-circle avadar-small circle-pic">
          <span class="initials">{{'Add Image'}}</span>
          <button color="primary" mat-mini-fab="" class="mat-primary" ng-reflect-color="primary" (click)="file.click()">
            <span>
              <mat-icon _ngcontent-c18="" class="mat-icon material-icons" role="img" aria-hidden="true">edit</mat-icon>
            </span>
            <div class="mat-button-ripple mat-ripple mat-button-ripple-round" matripple="" ng-reflect-centered="false"
              ng-reflect-disabled="false" ng-reflect-trigger="[object HTMLButtonElement]"></div>
            <div class="mat-button-focus-overlay"></div>
            <input #file class="picchangeupload" name="document" type="file" ng2FileSelect accept="image/*"
              [uploader]="uploader" (change)="onFileChanged($event)">
          </button>
        </div>
        <!-- new profile pic ends-->
        <!-- <div *ngIf="!paramId" class="avatar-circle avadar-small circle-pic"> -->
        <div *ngIf="paramId && (resident.profile_image === undefined || resident.profile_image === null)"
          class="avatar-circle avadar-small circle-pic">
          <!-- <span class="initials">{{captionName | uppercase}}</span> -->
          <span class="initials">{{'Add Image'}}</span>
          <button color="primary" mat-mini-fab="" class="mat-primary" ng-reflect-color="primary" (click)="file.click()">
            <span>
              <mat-icon _ngcontent-c18="" class="mat-icon material-icons" role="img" aria-hidden="true">edit</mat-icon>
            </span>
            <div class="mat-button-ripple mat-ripple mat-button-ripple-round" matripple="" ng-reflect-centered="false"
              ng-reflect-disabled="false" ng-reflect-trigger="[object HTMLButtonElement]"></div>
            <div class="mat-button-focus-overlay"></div>
            <input #file class="picchangeupload" name="document" type="file" ng2FileSelect accept="image/*"
              [uploader]="uploader" (change)="onFileChanged($event)">
          </button>
        </div>
        <!-- <img *ngIf="paramId && resident.profile_image === undefined"
          src="./assets/images/149071.png" class="img-fluid" alt="profile-pic"> -->

      </div>
      <mat-card-header class=" w-60">
        <mat-card-title class="mb-0">
          <div class="d-flex align-items-center w-100 name"> {{paramId? residentName :"Add Resident"}}
            <div class="d-flex res align-items-center"
              *ngIf="resident.custom_isolation!=''|| resident['testing_status'] === 'Positive' || checkFall == true"
              (click)="isolation()"> <span class="mat-button-wrapper ml-10 alerts position-relative">
                <!-- <mat-icon _ngcontent-c3="" class="mat-icon material-icon text-danger cursor alertIcon" role="img"
                    aria- hidden="true"> fiber_manual_record
                  </mat-icon> -->
              </span>
              <div class="ml-10" *ngIf="paramId && open_cares && open_cares.length" (click)="openTasks()">
                <img src="./assets/images/opentasks.svg" width="18" class="img-fluid cursor" alt="open-tasks">
              </div>
            </div>
            <img *ngIf="oldValueTestingStatus=='Negative'" src="./assets/images/negative.svg" width="28" height="28"
              class="ml-10">

            <img *ngIf="oldValueTestingStatus=='Positive'" src="./assets/images/positive.svg" width="28" height="28"
              class="ml-10 mt-5">

            <img *ngIf="resident.testing_status=='In-Progress'" src="./assets/images/inprogress.svg" width="28"
              height="28" class="ml-10">

            <!-- <div class="btndivs ml-20">
                <img src="../assets/images/order-icon.svg" class="myorder-ico" (click)="navigateToOrderLink()">
                 -->
            <!-- <button mat-stroked-button color="primary" class="mr-10 mt-10 btn_main_done" type="button"
                  (click)="navigateToOrderLink()">
                  Order
                </button> -->
            <!-- </div> -->

            <timer class="ml-2" *ngIf="isolation_end_date!='' && (!old_is_out_of_fac)" [displayValue]="true"
              [id]="resident._id" [startDate]="isolation_start_date" [endDate]="isolation_end_date"
              [days]="oldValueIsolation" (onComplete)="timerCompleted($event)"></timer>
          </div>
        </mat-card-title>
      </mat-card-header>

      <div class="w-40 block isolation-text" *ngIf="old_is_out_of_fac"><small class="pr-15">*Isolation will start when
          resident come back in facility</small> </div>
      <!-- <div class="w-70 text-right tabianation">       
        
         <span class="pl-15">Out of facility</span>
        <mat-slide-toggle color="primary" class="pl-15" [checked]="resident.is_out_of_fac"
          [(ngModel)]="resident.is_out_of_fac" name="is_out_of_fac" (change)="onChangefacility($event)">
        </mat-slide-toggle> 
                
         <button mat-flat-button color="warn" class="mr-10" (click)="cancel()">Cancel</button>
        <button mat-flat-button color="primary"  class="mr-10" (click)="onSubmit(f,resident)">Done</button> 
        <button mat-flat-button color="primary" *ngIf="paramId"
          (click)="changeButton(buttonName)">Done</button> 
      </div>-->
    </div>
    <div class="rightside w-100 mt-10">
      <!-- <div class="d-flex">
         <h1>{{resident.first_name}} {{resident.last_name}}</h1>
            <div class="d-flex res align-items-center" *ngIf="resident.custom_isolation !=''|| resident['testing_status'] === 'Positive' || checkFall == true" (click)="isolation()"> <span class="mat-button-wrapper ml-10 alerts position-relative">
                            <mat-icon _ngcontent-c3="" class="mat-icon material-icon text-danger cursor" role="img" aria-hidden="true">
                                fiber_manual_record
                            </mat-icon>
                          <span class="new badge text-danger position-absolute">2</span>--</span>
                        <div class="ml-10" *ngIf="paramId && open_cares && open_cares.length" (click)="openTasks()"> <img src="./assets/images/opentasks.svg" width="18" class="img-fluid cursor" alt="open-tasks">
                           <span class="opentasks">Open Tasks</span><span
                class="new badge"><a>{{open_cares.length}}</a></span>--</div>
                    </div> 
        </div>-->
      <div class="row w-70 w-75 w-80 w-85 w-90 w-100" style="float: right;">
        <div class="w-28 form-control2 mr-20">
          <div class="form-control mr-minus6-5rems container_form">
            <label class="fonts16">Location</label>
            <mat-form-field class="w-70 w-60 ml-8 top_bar_form">
              <mat-select class="hide-underline" name="out_of_fac" [(value)]="resident.is_out_of_fac"
                (selectionChange)="confirmChangeFacility($event)" [ngClass]="(resident.resident_status == 'Hospitalized' || resident.resident_status == 'Vacation'
                || resident.resident_status == 'Skilled Nursing' || resident.resident_status == 'Pending') ? 'grey' : 'rediblue'"
                [disabled]="resident.resident_status == 'Hospitalized' || resident.resident_status == 'Vacation'
                || resident.resident_status == 'Skilled Nursing' || resident.resident_status == 'Pending'">
                <mat-option *ngFor="let item of out_of_fac_options" [value]="item.value"> {{item.label}} </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="w-28 form-control2 mr-20" *ngIf="!old_is_out_of_fac">
          <div class="form-control mr-minus2-99rems container_form">
            <label class="fonts16">Isolation</label>
            <mat-form-field class="w-70 w-60 ml-10 top_bar_form">
              <!-- <mat-label>Covid-19 Isolation</mat-label> -->
              <mat-select [disabled]="resident._id==undefined" class="hide-underline rediblue" name="custom_isolation"
                [(ngModel)]="resident.isolation_days" (selectionChange)="confirmIsolation($event)">
                <ng-template ngFor let-item [ngForOf]="covid_isolation_array">
                  <mat-option
                    *ngIf="((item.value=='stop' && isolation_end_date!='') || (item.value!='stop'))  && (!(resident.custom_isolation != '' && item.value == '')) "
                    [value]="item.value"> {{item.label}} </mat-option>
                </ng-template>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="block"><small style="visibility: hidden;">text to cover space.</small> </div>
        </div>

        <div class="w-28 form-control2 mr-20" *ngIf="old_is_out_of_fac">

          <div class="form-control container_form">
            <label class="fonts16">Isolation</label>
            <mat-form-field class="w-70 w-60 ml-10 top_bar_form">
              <mat-select class="hide-underline rediblue" name="out_of_fac" [ngModelOptions]="{standalone: true}"
                [(ngModel)]="resident.isolation_apply_come_to_fac" (selectionChange)="setIsolation($event)">                
                <mat-optgroup *ngFor="let group1 of ground_options" [label]="group1.label">
                  <mat-option *ngFor="let item1 of group1.values" [value]="item1.value">
                    {{item1.label}}
                  </mat-option>
                </mat-optgroup>
              </mat-select>

            </mat-form-field>
          </div>
          <!-- <div class="block isolation-text"><small>*Isolation start when resident come back in facility</small> </div> -->
        </div>

        <div class="w-28 form-control2 mr-20">
          <div class="form-control container_form">
            <label class="fonts16" style="white-space: nowrap;">Testing Status</label>
            <mat-form-field class="w-50  ml-10 top_bar_form">
              <mat-select class="hide-underline rediblue" [disabled]="resident._id==undefined" name="testing"
                [(ngModel)]="resident.testing_status" (selectionChange)="testingStatus($event)">
                <mat-option *ngFor="let item of testing_status_array" [value]="item.value"> {{item.label}} </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="w-28 form-control2 mr-20">
          <div class="form-control container_form">
            <label class="fonts16">Status</label>
            <mat-form-field class="w-75 w-65 ml-10 top_bar_form">
              <!-- <mat-label> Status</mat-label> -->
              <mat-select #resident_status="ngModel" [(ngModel)]="resident.resident_status"
                (selectionChange)="onChangeStatus($event)" class="hide-underline" name="resident_status"
                required [ngClass]="(!resident._id && resident.resident_status) == 'Pending' ? 'grey' : 'rediblue'"
                [disabled]="!resident._id && resident.resident_status == 'Pending'">
                <ngx-mat-select-search [(ngModel)]="staSearch" placeholderLabel="Select Status"
                  noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                <mat-option *ngFor="let item of statusData |stringFilterBy:staSearch:'label'" [value]="item.value">
                  {{item.label}} </mat-option>
              </mat-select>
            </mat-form-field>



          </div>
        </div>
        <!-- <div class="w-9">
              <div class="btndivs">
                <button mat-stroked-button color="primary" class="mr-10 mt-10 btn_main_done"
                  (click)="navigateToOrderLink()">
                  Order
                </button>
              </div>
          </div> -->
      </div>
    </div>
  </mat-card>

  <mat-card>
    <!-- personal and health information -->
    <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
      <!-- <mat-card-title class="ann_heading">Personal & Health Information</mat-card-title> -->
    </mat-card-header>
    <mat-tab-group [selectedIndex]="selectedIndexVal.value" (selectedIndexChange)="selectedIndexVal.setValue($event);" (selectedTabChange)="selectedTabChanged($event)">

      <!-- Resident Profile Section -->
      <mat-tab label="Resident Profile">
        <mat-card-content>
          <div class="row personalhealthinfo mt-20">
            <div class="w-30">
              <div class="toggle toggle_dnr no_drop_shadow bdr_crd">
                <div class="unit_detail toggle_detail" > <span class="pr-8" [ngClass]="resident.resident_status == 'Vacation' || resident.resident_status == 'Hospitalized'
                  || resident.resident_status == 'Skilled' || resident.resident_status == 'Pending' || resident.is_out_of_fac == true ? 'grey-disabled' : ''">Out-of-Unit</span>
                  <mat-slide-toggle color="primary" class="" [checked]="resident.is_out_of_room" disableRipple=true
                    [(ngModel)]="resident.is_out_of_room" name="is_out_of_room" (change)="onChangeIsRoom(resident.is_out_of_room)"
                    [disabled]="resident.resident_status == 'Vacation' || resident.resident_status == 'Hospitalized'
                                || resident.resident_status == 'Skilled' || resident.resident_status == 'Pending' || resident.is_out_of_fac == true">
                  </mat-slide-toggle>
                </div>
              </div>
              <!-- <div class="toggle toggle_dnr no_drop_shadow bdr_crd">
          <div class="unit_detail" *ngIf="!paramId"><span class="pr-8">DNR</span>
            <mat-slide-toggle color="primary" class=" pr-15" [checked]="resident.dnr" [(ngModel)]="resident.dnr"
              name="dnr" (change)="onChangeDNR($event)"> </mat-slide-toggle>
          </div>
          </div> -->

              <div class="toggle toggle_dnr no_drop_shadow bdr_crd">
                <div class="unit_detail toggle_detail"> <span class="pr-8">2:00am Check-in</span>
                  <mat-slide-toggle [disabled]="(disable_2am_checkin)?true:false" color="primary"
                    [checked]="resident.two_am_checkin" [(ngModel)]="resident.two_am_checkin" name="two_am_checkin"
                    (change)="onChangeCheckin($event)"> </mat-slide-toggle>
                </div>
              </div>

              <div class="toggle toggle_dnr no_drop_shadow bdr_crd">
                <div class="unit_detail toggle_detail"> <span class="pr-8">Hospice</span>
                  <mat-slide-toggle color="primary" class="" [checked]="resident.hospice" [(ngModel)]="resident.hospice"
                    name="hospice" (change)="onChangeHospice($event)"> </mat-slide-toggle>
                </div>
              </div>

              <div class="toggle toggle_dnr no_drop_shadow bdr_crd">
                <div class="unit_detail toggle_detail" [ngStyle]="{'color':dnrStatus}">
                  <p class="pr-8" [ngStyle]="{'color':dnrStatus}">Do Not Resuscitate (DNR)</p>
                  <mat-slide-toggle class='Warn' [checked]="resident.dnr" [(ngModel)]="resident.dnr" name="dnr"
                    (change)="onChangeDNR($event)"> </mat-slide-toggle>
                </div>
              </div>

              <table class="highlight w-100 customborder mb-20">
                <tbody>
                  <tr>
                    <td>Temperature</td>
                    <td class="text-right"
                      *ngIf="health_data.temperature >check_temp_max || health_data.temperature < check_temp_min">
                      <strong class="text-danger"
                        *ngIf="health_data.temperature && !check_temp_max == ''">{{health_data.temperature}}째</strong>
                      <strong class="text-right"
                        *ngIf="health_data.temperature && check_temp_max == '' ">{{health_data.temperature}}째</strong>
                      <strong *ngIf="!health_data.temperature">-</strong>
                    </td>
                    <td class="text-right"
                      *ngIf="health_data.temperature >= check_temp_min && health_data.temperature <= check_temp_max">
                      <strong class="text-right" *ngIf="health_data.temperature">{{health_data.temperature}}째</strong>
                      <strong *ngIf="!health_data.temperature">-</strong>
                    </td>
                    <!--                                  <td class="text-right" *ngIf=" health_data.temperature < check_temp_min">
                                    <strong class="vitalColors" *ngIf="health_data.temperature">{{health_data.temperature}}째</strong>
                                    <strong *ngIf="!health_data.temperature">-</strong>
                                </td> -->
                  </tr>
                  <tr>
                    <td>Blood Pressure</td>
                    <td class="text-right"
                      *ngIf="blood_pressure.first_input < check_bp_min || blood_pressure.second_input > check_bp_max">
                      <strong class="text-danger" *ngIf="health_data.blood_pressure">{{health_data.blood_pressure}} mm
                        Hg</strong>
                      <strong class="text-danger" *ngIf="!health_data.blood_pressure">-</strong>
                    </td>
                    <td class="text-right"
                      *ngIf="blood_pressure.first_input > check_bp_min && blood_pressure.second_input < check_bp_max">
                      <strong *ngIf="health_data.blood_pressure">{{health_data.blood_pressure}} mm Hg</strong>
                      <strong *ngIf="!health_data.blood_pressure">-</strong>
                    </td>
                  </tr>
                  <tr>
                    <td>Pulse</td>
                    <td class="text-right"
                      *ngIf="health_data.pulse > check_pul_max || health_data.pulse < check_pul_min">
                      <strong class="text-danger"
                        *ngIf="health_data.pulse && !check_pul_max == ''">{{health_data.pulse}}
                        bpm</strong>
                      <strong class="text-right" *ngIf="health_data.pulse && check_pul_max == '' ">{{health_data.pulse}}
                        bpm</strong>
                      <strong *ngIf="!health_data.pulse">-</strong>
                    </td>
                    <td class="text-right"
                      *ngIf="health_data.pulse >= check_pul_min&& health_data.pulse <= check_pul_max">
                      <strong class="text-right" *ngIf="health_data.pulse">{{health_data.pulse}} bpm</strong>
                      <strong *ngIf="!health_data.pulse">-</strong>
                    </td>
                    <!--                                  <td class="text-right" *ngIf="health_data.pulse < check_pul_min">
                                    <strong class="vitalColors" *ngIf="health_data.pulse">{{health_data.pulse}} bpm</strong>
                                    <strong *ngIf="!health_data.pulse">-</strong>
                                </td> -->
                    <!--  <td class="text-right"><strong *ngIf="health_data.pulse">{{health_data.pulse}} bpm</strong> <strong *ngIf="!health_data.pulse">-</strong> </td> -->
                  </tr>
                  <tr>
                    <td>Oxygen</td>
                    <td class="text-right"
                      *ngIf="health_data.oxygen >check_oxy_max || health_data.oxygen < check_oxy_min">
                      <strong class="text-danger"
                        *ngIf="health_data.oxygen && !check_oxy_max == ''">{{health_data.oxygen}}
                        mm Hg</strong>
                      <strong class="text-right"
                        *ngIf="health_data.oxygen && check_oxy_max == '' ">{{health_data.oxygen}}
                        mm Hg</strong>
                      <strong *ngIf="!health_data.oxygen">-</strong>
                    </td>
                    <td class="text-right"
                      *ngIf="health_data.oxygen >= check_oxy_min&& health_data.oxygen <= check_oxy_max">
                      <strong class="text-right" *ngIf="health_data.oxygen">{{health_data.oxygen}} mm Hg</strong>
                      <strong *ngIf="!health_data.oxygen">-</strong>
                    </td>
                    <!--                                  <td class="text-right" *ngIf=" health_data.oxygen < check_oxy_min">
                                    <strong class="vitalColors" *ngIf="health_data.oxygen">{{health_data.oxygen}} mm Hg</strong>
                                    <strong *ngIf="!health_data.oxygen">-</strong>
                                </td> -->
                    <!--  <td class="text-right"><strong *ngIf="health_data.oxygen">{{health_data.oxygen}} mm Hg</strong><strong *ngIf="!health_data.oxygen">-</strong></td> -->
                  </tr>
                  <tr>
                    <td>Respiration</td>
                    <td class="text-right"
                      *ngIf="health_data.respiration >check_res_max || health_data.respiration < check_res_min">
                      <strong class="text-danger"
                        *ngIf="health_data.respiration && !check_res_max == ''">{{health_data.respiration}} bpm</strong>
                      <strong class="text-right"
                        *ngIf="health_data.respiration && check_res_max == '' ">{{health_data.respiration}} bpm</strong>
                      <strong *ngIf="!health_data.respiration">-</strong>
                    </td>
                    <td class="text-right"
                      *ngIf="health_data.respiration >= check_res_min&& health_data.respiration <= check_res_max">
                      <strong class="text-right" *ngIf="health_data.respiration">{{health_data.respiration}}
                        bpm</strong>
                      <strong *ngIf="!health_data.respiration">-</strong>
                    </td>
                    <!--                                  <td class="text-right" *ngIf=" health_data.respiration < check_res_min">
                                    <strong class="vitalColors" *ngIf="health_data.respiration">{{health_data.respiration}} bpm</strong>
                                    <strong *ngIf="!health_data.respiration">-</strong>
                                </td> -->
                    <!--  <td class="text-right"><strong *ngIf="health_data.respiration">{{health_data.respiration}} bpm</strong> <strong *ngIf="!health_data.respiration">-</strong></td> -->
                  </tr>
                  <tr>
                    <td>Blood Sugar</td>
                    <td class="text-right"
                      *ngIf="(check_bs_max!=''&& health_data.blood_sugar > check_bs_max) || (check_bs_min!='' && health_data.respiration < check_bs_min)">
                      <strong class="text-danger" *ngIf="health_data.blood_sugar">{{health_data.blood_sugar}}
                        mg/dL</strong>
                      <strong *ngIf="!health_data.blood_sugar">-</strong>
                    </td>
                    <td class="text-right"
                      *ngIf="(check_bs_min=='' && check_bs_max=='') || (health_data.blood_sugar >= check_bs_min&& health_data.blood_sugar <= check_bs_max)">
                      <strong class="text-right" *ngIf="health_data.blood_sugar">{{health_data.blood_sugar}}
                        mg/dL</strong>
                      <strong *ngIf="!health_data.blood_sugar">-</strong>
                    </td>
                    <!--                                 <td class="text-right" *ngIf="check_bs_min!=''&& health_data.respiration < check_bs_min">
                                    <strong class="vitalColors" *ngIf="health_data.blood_sugar">{{health_data.blood_sugar}} mg/dL</strong> 
                                    <strong *ngIf="!health_data.blood_sugar">-</strong>
                                </td> -->
                  </tr>
                  <tr>
                    <td>Height</td>
                    <td class="text-right"><strong *ngIf="health_data.height">{{height_ft}}' {{inches}} ''</strong>
                      <strong *ngIf="!health_data.height">-</strong>
                    </td>
                  </tr>
                  <tr>
                    <td>Weight</td>
                    <td class="text-right"><strong *ngIf="health_data.weight">{{health_data.weight}} lbs</strong>
                      <strong *ngIf="!health_data.weight">-</strong>
                    </td>
                  </tr>

                  <tr>
                    <td>BMI</td>
                    <td class="text-right"><strong *ngIf="health_data.bmi">{{health_data.bmi}}</strong> <strong
                        *ngIf="!health_data.bmi">-</strong> </td>
                  </tr>
                </tbody>
              </table>

              <div class="w-100 mb-20">
                <button mat-stroked-button class="vital-btn" (click)="onViewVitalTrends()" *ngIf="viewmode">View Vitals
                  Trends</button>
              </div>

              <div class="w-100">
                <mat-card class="border-card margin-bottom15">
                  <mat-card-header>
                    <mat-card-title class="ann_heading">NFC</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                    <ul class="beacon-listing sec_nfc_list">
                      <li *ngFor="let item of assignNFClist">
                        <span class="user-name ">
                          <a class="cursor">{{item.ntagid}}</a>
                        </span>
                        <div class="d-flex justify-content-end">
                          <span>
                            <!-- <button mat-mini-fab class="mr-10 small-btn" color="primary" > -->
                            <mat-icon class="removeicon basecolor" (click)="unassignNFC(item)">remove_circle</mat-icon>
                            <!-- </button> -->
                          </span>
                        </div>
                      </li>
                    </ul>
                    <mat-form-field class="w-100">
                      <mat-label>
                        Select an NFC Tag</mat-label>
                      <mat-select [(ngModel)]="nfc1" name="nfc" [ngModelOptions]="{standalone: true}">
                        <ngx-mat-select-search [(ngModel)]="nfcSearch" placeholderLabel="Select NFC"
                          noEntriesFoundLabel="Not Found" name="search" (keydown)="$event.stopPropagation()">
                        </ngx-mat-select-search>
                        <mat-option #matOptionRef *ngFor="let item of nfclist |stringFilterBy:nfcSearch: 'ntagid'"
                          [value]="item" (click)="assignNFC(item)">
                          {{item.ntagid}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </mat-card-content>
                </mat-card>
              </div>
              <!-- <div class="w-100 pl-15">
              </div> -->
            </div>
            <div [ngClass]="paramId ? 'w-70 ml-20':'w-70 ml-20'">
              <mat-card-content>

                <!-- first_name,middle_name -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <mat-form-field class="w-100">
                      <input matInput placeholder="First Name" name="first_name" [(ngModel)]="resident.first_name"
                        (keypress)="checkAlpha($event,'')" (focusout)="onFocusOutEvent($event, 'first_name')" required>
                    </mat-form-field>
                  </div>

                  <div class="w-100 pl-15">
                    <mat-form-field class="w-100">
                      <input matInput placeholder="Middle Name" name="middle_name" [(ngModel)]="resident.middle_name"
                        (keypress)="checkAlphalast($event)" (focusout)="onFocusOutEvent($event, 'middle_name')" required>
                    </mat-form-field>
                  </div>
                </div>

                <!-- last_name,nick_name -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <mat-form-field class="w-100">
                      <input matInput placeholder="Last Name" name="last_name" [(ngModel)]="resident.last_name"
                        (keypress)="checkAlphalast($event)" (focusout)="onFocusOutEvent($event, 'last_name')" required>
                    </mat-form-field>
                  </div>

                  <div class="w-100 pl-15">
                    <mat-form-field class="w-100">
                      <input matInput placeholder="Nickname" name="nick_name" [(ngModel)]="resident.nick_name"
                        (keypress)="checkAlphalast($event)">
                    </mat-form-field>
                  </div>

                </div>

                <!-- gender -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-50 pr-15">
                    <mat-form-field class="w-100">
                      <mat-label> Gender</mat-label>
                      <mat-select #gender="ngModel" [(ngModel)]="resident.gender" name="gender" required>
                        <ngx-mat-select-search [(ngModel)]="genderSearch" placeholderLabel="Select Gender"
                          noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                        <mat-option *ngFor="let item of genders |stringFilterBy:genderSearch:'name'"
                          [value]="item.name">
                          {{item.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>

                <!-- DOB, age -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <!-- <mat-form-field class="w-100">
                  <input matInput placeholder="DOB" name="dob" [(ngModel)]="resident.dob">
                </mat-form-field> -->
                    <mat-form-field class="w-100">
                      <mat-label>Date Of Birth</mat-label>
                      <input name="dob" matInput (click)="picker.open()" [matDatepicker]="picker" onPaste="return false"
                        (keypress)="allowDateKeys($event)" (dateInput)="getDob('input', $event)" [min]="residentMinDate"
                        (dateChange)="getDob('change', $event)" placeholder="MM/DD/YYYY" [(ngModel)]="resident.dob"
                        [max]="residentMaxDate" required>
                      <mat-datepicker-toggle matSuffix [for]="picker">
                        <mat-icon matDatepickerToggleIcon>
                          <img class="custom-calendarsvg2" src="./assets/images/report/calendar-menu-icon-blue.svg"
                            width="22" height="20.321">
                        </mat-icon>
                      </mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="w-100 pl-15">
                    <mat-form-field class="w-100">
                      <input disabled matInput number placeholder="Age" name="age" [(ngModel)]="resident.age">
                    </mat-form-field>
                  </div>
                </div>

                <!-- Admit type,Admit date -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <mat-form-field class="w-100">
                      <mat-label>Admit Date</mat-label>
                      <input matInput name="admit_date" (click)="picker1.open()" [matDatepicker]="picker1"
                        onPaste="return false" (keypress)="allowDateKeys($event)" placeholder="MM/DD/YYYY"
                        (dateInput)="admitDate('input', $event)" [max]="maxDate"
                        (dateChange)="admitDate('change', $event)" [min]="minDateOfAdmit(resident.dob)"
                        [(ngModel)]="resident.admit_date" required>
                      <mat-datepicker-toggle matSuffix [for]="picker1">
                        <mat-icon matDatepickerToggleIcon>
                          <img class="custom-calendarsvg2" src="./assets/images/report/calendar-menu-icon-blue.svg"
                            width="22" height="20.321">
                        </mat-icon>
                      </mat-datepicker-toggle>
                      <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>

                  </div>

                  <div class="w-100 pl-15">
                    <!-- <mat-form-field class="w-100">
                  <input matInput placeholder="Admit Date" name="admit_date" [(ngModel)]="resident.admit_date">
                </mat-form-field> -->
                    <mat-form-field class="w-100">
                      <mat-label> Admit Type</mat-label>
                      <mat-select #gender="ngModel" [(ngModel)]="resident.admit_type" name="admit_type" required>
                        <ngx-mat-select-search [(ngModel)]="admitTypeSearch" placeholderLabel="Select Admit Type"
                          noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                        <mat-option *ngFor="let item of admit_types |stringFilterBy:admitTypeSearch:'name'" (click)="selectAdmitType(item.name)"
                          [value]="item.name">
                          {{item.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <!--  <div class="w-100 pl-15">
                <mat-form-field class="w-100">
                  <mat-label>
                    Unit</mat-label>
                  <input   matInput placeholder="Unit" name="unit" [(ngModel)]="resident.unit">
                </mat-form-field>
              </div> -->
                </div>

                <!-- Org, facility -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <mat-form-field class="w-100">
                      <mat-label> Organization</mat-label>
                      <mat-select #organization="ngModel" [(ngModel)]="resident.organization" (selectionChange)="changeOrg($event.value,1)"
                        name="organization" required>
                        <ngx-mat-select-search [(ngModel)]="orgSearch" placeholderLabel="Select Organization"
                          noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                        <mat-option *ngFor="let item of organiz |stringFilterBy:orgSearch:'org_name'"
                          [value]="item._id">
                          {{item.org_name}} </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="w-100 pl-15">
                    <mat-form-field class="w-100">
                      <mat-label> Building</mat-label>
                      <mat-select #facility="ngModel" [(ngModel)]="resident.facility"
                        (selectionChange)="changeFac($event.value,1)" name="facility" required>
                        <ngx-mat-select-search [(ngModel)]="searchCtrl" placeholderLabel="Select Building"
                          noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                        <mat-option *ngFor="let item of faclist |stringFilterBy:searchCtrl:'fac_name'"
                          [value]="item._id">
                          {{item.fac_name}} </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>

                <div class="d-flex justify-content-between form-row mt-10">
                  <div class="w-50 pr-15">
                    <mat-form-field class="w-100">
                      <mat-label> Unit</mat-label>
                      <input matInput name="room" *ngIf="paramId && resident.room && resident.room.room"
                        [(ngModel)]="resident.room.room" disabled>
                      <input matInput name="room" *ngIf="!paramId || !resident.room || !resident.room.room" value="--"
                        disabled>
                    </mat-form-field>
                  </div>
                  <!-- <div class="w-100 pl-15">
                <mat-form-field class="w-100" *ngIf="!paramId || !resident.room || !resident.room.room">
                  <mat-label> Unit</mat-label>
                  <input matInput name="room" value="--" disabled>
                </mat-form-field>
              </div> -->
                </div>

                <!-- billing id, status -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <mat-form-field class="w-100">
                      <mat-label>Level</mat-label>
                      <mat-select #care_level="ngModel" [(ngModel)]="resident.care_level"
                        (selectionChange)="changeCareLevel($event.value,resident.resident_status,1)" name="care_level"
                        required>
                        <ngx-mat-select-search [(ngModel)]="careSearch" placeholderLabel="Select Primary Level"
                          noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                        <mat-option *ngFor="let item of carelevelData |stringFilterBy:careSearch:'label'"
                          [value]="item._id" (click)="oncareSelect(item._id)"> {{item.label}} </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div [ngClass]="{'w-100': true, 'pl-15':true }">
                    <mat-form-field class="w-100">
                      <mat-label> Social Security Number</mat-label>
                      <!--(keypress)="checkallwoAlphaAndNum($event)"-->
                      <input matInput name="social_security_no" placeholder="XXX-XX-XXXX"
                        [(ngModel)]="resident.social_security_no" mask="000-00-0000" onPaste="return false" required
                        (change)="checkIsUniqueSSN()">
                    </mat-form-field>
                    <span class="invalid-msg" *ngIf="SSNAlreadyExist">
                      SSN already exist!
                    </span>
                  </div>

                </div>

                <!-- care level,secondary care level -->
                <div class="d-flex justify-content-between form-row">
                  <div class="w-100 pr-15">
                    <!-- <div class="w-100 pr-15"> -->
                    <mat-form-field class="w-100">
                      <input matInput placeholder="Billing ID" name="billingId" [(ngModel)]="resident.billingId"
                        (change)="checkIsUniqueBillId()" required>
                    </mat-form-field>
                    <span class="invalid-msg" *ngIf="BillingIdAlreadyExist">
                      Billing Id already exist,enter valid Billing Id
                    </span>
                  </div>
                  <!-- <div class="w-100 pl-15">
                <mat-form-field class="w-100">  
                  <mat-label> Secondary Level</mat-label>
                  <mat-select #secondary_care_level="ngModel" [(ngModel)]="resident.secondary_care_level"
                    name="secondary_care_level" [multiple]="true" #multiSelect  >
                    <ngx-mat-select-search [(ngModel)]="secSearch" placeholderLabel="Select Secondary Level"
                      noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                    <mat-option [value]="0" #allSelected (click)="selectAllLevels()">All </mat-option>
                    <mat-option *ngFor="let item of secondarycarelevelData |stringFilterBy:secSearch:'label'"
                      [value]="item._id" (click)="selectMultipleCares(item._id)"
                      [disabled]="resident.care_level && (item._id === resident.care_level)"> {{item.label}}
                    </mat-option>
                  </mat-select> -->
                  <!-- <mat-select placeholder="Secondary Care Level" name="secondary_care_level" multiple
                    [(ngModel)]="resident.secondary_care_level">
                    <mat-select-trigger>
                      items selected
                    </mat-select-trigger>
                    <mat-option [value]="0" #allSelected (click)="selectAllLevels()">All
                    </mat-option>
                    <mat-option *ngFor="let item of carelevelData" [value]="item._id"
                      (click)="selectMultipleCares(item._id)"
                      [disabled]="resident.care_level && (item._id === resident.care_level)">
                      {{item.label}}
                    </mat-option>
                  </mat-select> -->
                  <!-- </mat-form-field>
              </div> -->
                </div>
                <div class="d-flex justify-content-between form-row">
                  <!-- <div class="w-100 pr-15">
                <mat-form-field class="w-100">
                  <input matInput   placeholder="Billing Id" name="billingId"
                    [(ngModel)]="resident.billingId">
                </mat-form-field>
              </div> -->
                </div>
                <mat-card-header class="mt-30 d-flex justify-content-between align-center w-100 border-bottom">
                  <mat-card-title class="ann_heading">Resident Contact Information</mat-card-title>
                </mat-card-header>

                <!-- Old phone numbers fields -->
                <!-- <div class="d-flex justify-content-between form-row mt-10">
              <div class="w-100 pr-15">
                <mat-form-field class="w-100">
                  <input matInput placeholder="Home Phone" name="home_phone" [(ngModel)]="resident.home_phone"
                    maxlength="14" mask="(000) 000-0000" required> </mat-form-field>
              </div>
              <div class="w-100 pl-15">
                <mat-form-field class="w-100">
                  <input matInput placeholder="Mobile Phone" name="mobile_phone" [(ngModel)]="resident.mobile_phone"
                    maxlength="14" mask="(000) 000-0000"> </mat-form-field>
              </div>
            </div> -->

                <!-- Old email fields -->
                <!-- <div class="d-flex justify-content-between form-row mt-10">
              <div class="w-100 pr-15">
                <mat-form-field class="w-100">
                  <input matInput placeholder="Email" name="email" [(ngModel)]="resident.email"
                    pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                    (keyup)="resident.email = $event.target.value.toLowerCase()"> </mat-form-field>
              </div>
              <div class="w-100 pl-15">
                <mat-form-field class="w-100">
                  <input matInput placeholder="Other" name="other_email" [(ngModel)]="resident.other_email"
                    pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                    (keyup)="resident.other_email = $event.target.value.toLowerCase()"> </mat-form-field>
              </div>
            </div> -->
                <!-- [ngStyle]="show_home==true?{'display':'block'}:{'display':'none'}" -->
                <!-- <div class=" d-flex-column justify-content-between form-row mt-10 ">
              	<div class="d-flex justify-content-between form-row mt-10" >
               		<div class="w-100 pr-15 mt-10">
                		<mat-label class="w-100">Home</mat-label>
               		</div> 

               		<div class="w-100 pl-15">
                		<mat-form-field class="w-100">
                  			<input matInput placeholder="Home" name='home_phone' [(ngModel)]="resident.home_phone" maxlength="14" mask="(000) 000-0000" required>
                	</mat-form-field>
              		</div>
              	</div>

              	<div class="d-flex justify-content-between form-row mt-10">
              		<div class="w-100 pr-15 mt-10">
                		<mat-label class="w-100" [ngStyle]="show_mobile==true?{'display':'block'}:{'display':'none'}">Mobile</mat-label>
              		</div>
               		<div class="d-flex w-100 pl-15">
                		<mat-form-field class="w-100" [ngStyle]="show_mobile==true?{'display':'block'}:{'display':'none'}">
                  		<input matInput placeholder="Mobile" name='mobile_phone' [(ngModel)]="resident.mobile_phone" maxlength="14" mask="(000) 000-0000">
                		</mat-form-field>
                		<mat-icon _ngcontent-bgg-c33="" aria-hidden="true" [ngStyle]="show_mobile==true?{'display':'block'}:{'display':'none'}"
                		class="w-100 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                		mat-raised-button="" role="img" (click)="removePhoneField('Mobile')">remove_circle </mat-icon>
               		</div>
              	</div>

            </div>

            <div class=" d-flex form-row mt-10 ">
              	<div class="pr-15">
               	 	<mat-label>Add Phone</mat-label>
              	</div>
              	<div>
                	<mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor" role="img"
              		aria-hidden="true" [matMenuTriggerFor]="menu">add_circle </mat-icon>
              	</div>
            </div>
            <mat-menu #menu="matMenu">
              	<button (click)="changePhoneType(item.name)" *ngFor="let item of contact_type" mat-menu-item>
                	{{item.name}}
              	</button>
			      </mat-menu> -->

                <!-- Dropdown phone number -->
                <!-- <div class=" d-flex justify-content-between form-row mt-10 ">
              <div class="w-100 pr-15">
                <mat-form-field class="w-100">
                  <mat-label>Select Number Type</mat-label>
                  <mat-select #type="ngModel" [(ngModel)]="show" name="type" required (selectionChange)="changePhoneType($event)">
                    <ngx-mat-select-search [(ngModel)]="phoneSearch" placeholderLabel="Select Type" noEntriesFoundLabel="Not Found" name="search">
                    </ngx-mat-select-search>
                    <mat-option *ngFor="let item of contact_type | stringFilterBy:phoneSearch:'name'" [value]="item.name">
                      {{item.name}}
                    </mat-option>
                  </mat-select> 
                </mat-form-field>
              </div>
              <div class="w-100 pl-15">
                <mat-form-field class="w-100" [ngStyle]="show=='Mobile'?{'display':'block'}:{'display':'none'}">
                  <input matInput placeholder="Mobile Phone" name='mobile_phone' [(ngModel)]="resident.mobile_phone" maxlength="14" mask="(000) 000-0000">
                </mat-form-field>
                <mat-form-field class="w-100" [ngStyle]="show=='Home'?{'display':'block'}:{'display':'none'}">
                  <input matInput placeholder="Home Phone" name='home_phone' [(ngModel)]="resident.home_phone" maxlength="14" mask="(000) 000-0000" required>
                </mat-form-field>
              </div>
            </div> -->

                <!-- new multiple phone numbers -->
                <div class="d-flex justify-content-between form-row mt-24" *ngFor="let item of phoneArr;let i = index">
                  <div class="w-100 pr-15">
                    <mat-form-field class="w-100">
                      <mat-select #typeOfNumber="ngModel" [(ngModel)]="item.name" [name]="item + '__' + i" required>
                        <ngx-mat-select-search [(ngModel)]="PhoneNumberTypeSearch" placeholderLabel="Select Phone"
                          noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                        <mat-option *ngFor="let i of type_of_contact |stringFilterBy:PhoneNumberTypeSearch:'name'"
                          [value]="i.name">
                          {{i.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="d-flex w-100 pl-15">
                    <mat-form-field class="w-100">
                      <mat-label>
                        {{item.name}}
                        {{item.name=='Other'?'Email':(item.name=='Home'||item.name=='Mobile'||item.name=='Work')?'contact':undefined}}
                      </mat-label>
                      <input *ngIf="item.name=='Home'||item.name=='Mobile' || item.name=='Work'" matInput
                        placeholder="  (989) 989-9898" name="item.name + '_' + i + 1 + {{item.id}}"
                        [(ngModel)]="item.value" maxlength="14" mask="(000) 000-0000"
                        [checkDuplicatefield]="[resident.phone_numbers,i]">
                      <input *ngIf="item.name!='Home' && item.name!='Mobile' && item.name!='Work'" matInput
                        placeholder="  example@domain.com" name="item.name + '_' + i + 1 + 'email' + {{item.id}}"
                        [(ngModel)]="item.value"
                        pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                        (keyup)="resident.email = $event.target.value.toLowerCase()"
                        [checkDuplicatefield]="[resident.phone_numbers,i]">
                    </mat-form-field>
                  </div>
                  <div class="act add-mate-icon pl-15">
                    <mat-icon _ngcontent-egi-c18="" aria-hidden="true" *ngIf="i==0"
                      class="mat-icon mt-20 material-icon basecolor cursor notranslate material-icons mat-icon-no-color"
                      mat-raised-button="" role="img" (click)="addNewPhoneField(f, item.name)">
                      add_circle
                    </mat-icon>
                  </div>

                  <!-- <mat-icon _ngcontent-bgg-c33="" aria-hidden="true" *ngIf="i>0"
                      class="w-100 mt-20 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                      mat-raised-button="" role="img" (click)="removeAddedPhoneField(i)">remove_circle
                    </mat-icon> -->

                </div>

                <div *ngFor="let item of resident.phone_numbers;let i = index;">
                  <ng-container>
                    <div class="d-flex justify-content-between form-row">
                      <div class="w-100 pr-15">
                        <mat-form-field class="w-100">
                          <mat-select #typeOfNumber="ngModel" [(ngModel)]="item.name" [name]="item + '__' + i" required>
                            <ngx-mat-select-search [(ngModel)]="PhoneNumberTypeSearch" placeholderLabel="Select Phone"
                              noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                            <mat-option *ngFor="let i of type_of_contact |stringFilterBy:PhoneNumberTypeSearch:'name'"
                              [value]="i.name">
                              {{i.name}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div class="d-flex w-100 pl-15">
                        <mat-form-field class="w-100">
                          <mat-label>
                            {{item.name}}
                            {{item.name=='Other'?'Email':(item.name=='Home'||item.name=='Mobile'||item.name=='Work')?'contact':undefined}}
                          </mat-label>
                          <input *ngIf="item.name=='Home'||item.name=='Mobile' || item.name=='Work'" matInput
                            placeholder="  (989) 989-9898" name="item.name + '_' + i + 1 + {{item.id}}"
                            [(ngModel)]="item.value" maxlength="14" mask="(000) 000-0000"
                            [checkDuplicatefield]="[resident.phone_numbers,i]">
                          <input *ngIf="item.name!='Home' && item.name!='Mobile' && item.name!='Work'" matInput
                            placeholder="  example@domain.com" name="item.name + '_' + i + 1 + 'email' + {{item.id}}"
                            [(ngModel)]="item.value"
                            pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                            (keyup)="resident.email = $event.target.value.toLowerCase()"
                            [checkDuplicatefield]="[resident.phone_numbers,i]">
                        </mat-form-field>
                      </div>

                      <div class="act pl-15">
                        <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                          class="mat-icon mt-20 material-icon basecolor cursor notranslate material-icons mat-icon-no-color remove_icon"
                          mat-raised-button="" role="img" (click)="removeAddedPhoneFieldFn(i, item)">remove_circle
                        </mat-icon>
                      </div>
                    </div>
                  </ng-container>
                </div>


                <!-- //new multiple emails -->
                <!-- <div class="d-flex justify-content-between form-row mt-24" *ngFor="let item of resident.emails;let i = index"> 
              <div class="w-100 pr-15">
                <mat-form-field class="w-100">
                  <mat-select #typeOfEmail="ngModel" [(ngModel)]="item.name" [name]="item + '__' + i + 'email'" >
                    <ngx-mat-select-search [(ngModel)]="emailAddressSearch" placeholderLabel="Select Email"
                      noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                    <mat-option *ngFor="let i of email_type_list |stringFilterBy:emailAddressSearch:'name'"
                      [value]="i.name">
                      {{i.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="d-flex w-100 pl-15">
                <mat-form-field class="w-100">
                  <mat-label>{{item.name}} {{item.name=='Other'?'Email':undefined}}</mat-label>
                  <input matInput placeholder="  example@domain.com" name="item.name + '_' + i + 1 + 'email' + {{item.id}}" [(ngModel)]="item.value"
                    pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                    (keyup)="resident.email = $event.target.value.toLowerCase()" [required]=true  [checkDuplicatefield]="[resident.emails,i]">
                </mat-form-field>
                <mat-icon _ngcontent-egi-c18="" aria-hidden="true" *ngIf="i==0"
                  class="mat-icon mt-20 material-icon basecolor cursor notranslate material-icons mat-icon-no-color"
                  mat-raised-button="" role="img" (click)="addEmergencyEmail(f)">
                  add_circle
                </mat-icon>
                <mat-icon _ngcontent-bgg-c33="" aria-hidden="true" *ngIf="i>0"
                  class="w-100 mt-20 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                  mat-raised-button="" role="img" (click)="removeEmergencyEmailField(i)">remove_circle
                </mat-icon>
              </div>
            </div> -->

                <!-- <div class=" d-flex-column justify-content-between form-row mt-10 ">
				<div class=" d-flex justify-content-between form-row mt-10 ">
					<div class="w-100 pr-15" [ngStyle]="show_mainEmail==true?{'display':'block'}:{'display':'none'}">
						<mat-label>Email</mat-label>
					</div>
					<div class="d-flex w-100 pl-15">
						<mat-form-field class="w-100" [ngStyle]="show_mainEmail==true?{'display':'block'}:{'display':'none'}">
							<input matInput placeholder="Email" name="email" [(ngModel)]="resident.email"
							  pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
							  (keyup)="resident.email = $event.target.value.toLowerCase()">
						</mat-form-field>
						<mat-icon _ngcontent-bgg-c33="" aria-hidden="true" [ngStyle]="show_mainEmail==true?{'display':'block'}:{'display':'none'}"
                		class="w-100 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
						mat-raised-button="" role="img" (click)="removeEmailField('Email')">remove_circle 
						</mat-icon>
					</div>
				</div>

				<div class=" d-flex justify-content-between form-row mt-10 ">
					<div class="w-100 pr-15" [ngStyle]="show_otherEmail==true?{'display':'block'}:{'display':'none'}">
						<mat-label>Other</mat-label>
					</div>
					<div class="d-flex w-100 pl-15">
						<mat-form-field class="w-100" [ngStyle]="show_otherEmail==true?{'display':'block'}:{'display':'none'}">
							<input matInput placeholder="Other" name="other_email" [(ngModel)]="resident.other_email"
							  pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
							  (keyup)="resident.other_email = $event.target.value.toLowerCase()">
						</mat-form-field>
						<mat-icon _ngcontent-bgg-c33="" aria-hidden="true" [ngStyle]="show_otherEmail==true?{'display':'block'}:{'display':'none'}"
                		class="w-100 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
						mat-raised-button="" role="img" (click)="removeEmailField('Other')">remove_circle 
						</mat-icon>
					</div>
				</div>
			</div>

			<div class=" d-flex form-row mt-10 ">
				<div class="pr-15">
					<mat-label>Add Email</mat-label>
				</div>
				<div>
					<mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor" role="img" aria-hidden="true"
						[matMenuTriggerFor]="menuEmail">add_circle </mat-icon>
				</div>
			</div>
			<mat-menu #menuEmail="matMenu">
				<button (click)="changeEmailType(item.name)" *ngFor="let item of email_type" mat-menu-item>
					{{item.name}}
				</button>
			</mat-menu> -->

                <!-- dropdown email -->
                <!-- <div class=" d-flex justify-content-between form-row mt-10 ">
              <div class="w-100 pr-15">
                <mat-form-field class="w-100">
                  <mat-label>Select Email Type</mat-label>
                  <mat-select #typeemail="ngModel" [(ngModel)]="show_email" name="typeemail" required (selectionChange)="changeEmailType($event)">
                    <ngx-mat-select-search [(ngModel)]="emailSearch" placeholderLabel="Select Email Type" noEntriesFoundLabel="Not Found" name="search">
                    </ngx-mat-select-search>
                    <mat-option *ngFor="let item of email_type | stringFilterBy:emailSearch:'name'" [value]="item.name">
                      {{item.name}}
                    </mat-option>
                  </mat-select> 
                </mat-form-field>
              </div>
              <div class="w-100 pl-15">
                <mat-form-field class="w-100" [ngStyle]="show_email=='Email'?{'display':'block'}:{'display':'none'}">
                  <input matInput placeholder="Email" name="email" [(ngModel)]="resident.email"
                    pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                    (keyup)="resident.email = $event.target.value.toLowerCase()">
                  </mat-form-field>
                <mat-form-field class="w-100" [ngStyle]="show_email=='Other'?{'display':'block'}:{'display':'none'}">
                  <input matInput placeholder="Other" name="other_email" [(ngModel)]="resident.other_email"
                    pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$"
                    (keyup)="resident.other_email = $event.target.value.toLowerCase()">
                  </mat-form-field>
              </div>
            </div> -->



                <!-- <div class="d-flex justify-content-between form-row">
              <div class="w-100">
                <mat-form-field class="w-100">
                  <input matInput placeholder="Enter notes" name="notes" [(ngModel)]="resident.notes"> </mat-form-field>
              </div>
            </div> -->
              </mat-card-content>
            </div>
          </div>
          <!-- <mat-card>
        <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
          <mat-card-title class="ann_heading">Tracking</mat-card-title>
        </mat-card-header>
        <div class="d-flex justify-content-between form-row pt-15">
          <div class="w-100 pr-15">
            <mat-card class="border-card margin-bottom15">
              <mat-card-header>
                <mat-card-title class="ann_heading">NFC</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <ul class="beacon-listing sec_nfc_list">
                  <li *ngFor="let item of assignNFClist">
                    <span class="user-name ">
                      <a class="cursor">{{item.ntagid}}</a>
                    </span>
                    <div class="d-flex justify-content-end">
                      <span>
                        <mat-icon class="removeicon basecolor" (click)="unassignNFC(item)">remove_circle</mat-icon>
                      </span>
                    </div>
                  </li>
                </ul>
                <mat-form-field class="w-100">
                  <mat-label>
                    Select an Unassigned NFC Tag</mat-label>
                  <mat-select [(ngModel)]="nfc" name="nfc" [ngModelOptions]="{standalone: true}" >
                    <ngx-mat-select-search [(ngModel)]="nfcSearch" placeholderLabel="Select NFC"
                      noEntriesFoundLabel="Not Found" name="search" (keydown)="$event.stopPropagation()">
                    </ngx-mat-select-search>
                    <mat-option *ngFor="let item of nfclist |stringFilterBy:nfcSearch: 'ntagid'" [value]="item"
                      (click)="assignNFC(nfc)">
                      {{item.ntagid}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="w-100 pl-15">
          </div>
        </div>
      </mat-card> -->
        </mat-card-content>
      </mat-tab>

      <!-- Contact Section -->
      <mat-tab label="Contacts" #tab [disabled]='isalltabidisable'>
        <!-- Start New Design Changes Contact -->
        <!-- Contacts -->
        <mat-card class=" contacts no_drop_shadow p-0">
          <mat-card-header class="d-flex justify-content-between align-items-center w-100 border-bottom">
            <!-- <mat-card-title class="ann_heading">Contact Information</mat-card-title> -->
            <!-- <mat-icon mat-raised-button (click)="openDialog()" class="mat-icon material-icon basecolor cursor"
              role="img" aria-hidden="true">add_circle </mat-icon> -->
          </mat-card-header>

          <!-- <div class="d-flex flexwrap" *ngIf="!showAll && displayData && displayData.length">
        <div class="w-33 contact_info" *ngFor="let item of displayData">
          <mat-card class="mt-20 border no_drop_shadow bdr_crd">
            <ul>
              <li>
                <div class="d-flex align-items-center">
                  <span class="user_name"> {{item.first_name}} {{item.last_name}} ({{item.relation}}) <mat-icon
                      mat-raised-button (click)="editContact(item)" class="mat-icon material-icon basecolor cursor"
                      role="img" aria-hidden="true">edit </mat-icon>
                  </span>
                </div>
                <div class="action_buttons">
                  <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                    class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                    mat-raised-button="" role="img" (click)="deleteContact(item)">remove_circle </mat-icon>
                </div>
              </li>
              <li class="mobile_padding">
                <div class="d-flex align-items-center">
                  <span *ngIf="item.homephone != '' && item.homephone != null">Mobile ({{item.homephone.slice(0,3)}})
                    {{item.homephone.slice(3,6)}}-{{item.homephone.slice(6)}}</span>
                  <span *ngIf="item.homephone != '' && item.mobilephone == '' ">Mobile ({{item.homephone.slice(0,3)}})
                    {{item.homephone.slice(3,6)}}-{{item.homephone.slice(6)}},{{item.mobilephone}}</span></div>
              </li>
              <li>
                <div class="d-flex align-items-center">
                  <span *ngIf="item.mobilephone != '' && item.homephone != null">Home ({{item.mobilephone.slice(0,3)}})
                    {{item.mobilephone.slice(3,6)}}-{{item.mobilephone.slice(6)}}</span>
                  <span *ngIf="item.homephone != '' && item.mobilephone == '' "> Home ({{item.homephone.slice(0,3)}})
                    {{item.homephone.slice(3,6)}}-{{item.homephone.slice(6)}},{{item.mobilephone}}</span></div>
              </li>
              <li>
                <div class="d-flex align-items-center">
                  <span class="email_color">{{item.email}}</span>
                </div>
              </li>

              <li *ngIf="item.address1">
                <div class="d-flex align-items-center">
                  <span >{{item.address1}}</span>
                </div>
              </li>

              <li *ngIf="item.address2">
                <div class="d-flex align-items-center">
                  <span >{{item.address2}}</span>
                </div>
              </li>

              <li *ngIf="item.state">
                <div class="d-flex align-items-center">
                  <span *ngIf="item.zip">{{item.state}}, {{item.city}} {{item.zip}}</span>
                  <span *ngIf="!item.zip">{{item.state}}, {{item.city}}</span>
                </div>
              </li>

              <li class="note_detail">
                <div class="d-flex align-items-center">
                  <span (click)="editContact(item)" class="notes">
                    <mat-icon>create</mat-icon>
                    View Notes
                  </span>
                </div>
              </li>
              <li>
                <div class="d-flex align-items-center green_icon">
                  <span *ngFor="let item of item.type_of_contact" [ngClass]="" class="em_contact">
                    <span *ngIf="item ==='Emergency Contact'">
                      <mat-icon>warning</mat-icon>Emergency Contact
                    </span>
                    <span *ngIf="item ==='Power of Attorney Financial'">
                      <mat-icon>gavel</mat-icon>Power of Attorney Financial
                    </span>
                    <span *ngIf="item ==='Power of Attorney Medical'">
                      <mat-icon>gavel</mat-icon>Power of Attorney Medical
                    </span>
                  </span>
                </div>
              </li>
            </ul>
          </mat-card>
        </div>
      </div> -->

          <mat-card class="border no_drop_shadow p-0" style="margin-top: 15px;">
            <div class="text-right w-100 padd_6">
              <button mat-stroked-button color="primary" class="btn_main_done" [ngClass]="{ 'addNew' : emergencyArr.length > 3 }"
              (click)="openDialog()">Add New
              </button>
              <button mat-stroked-button color="primary" class="btn_main_done"
                [ngClass]="{'btn_main_done': true,'disabled_button': emergencyArr.length<=3}"
                (click)="openPopupToShowAll()" [disabled]="emergencyArr.length<3">View All
              </button>
            </div>
            <div class="example-container">
              <!-- emergencyArr.length>2?emergencyArr.slice(0,2):emergencyArr -->
              <!-- <div ></div> -->
              <div class="w-33 contact_box" [ngClass]="{ 'contact_info': i !== 2 }"
                *ngFor="let item of emergencyArr.length>2?emergencyArr.slice(0,3):emergencyArr; let i=index">
                <mat-card class="border no_drop_shadow bdr_crd d-flex justify-space-between "
                  [ngClass]="{ 'emergency-block-color': checkEmergencyCheckExists(item.type_of_contact)}">
                  <div class="emer_section">
                    <ul>
                      <span *ngIf="checkEmergencyCheckExists(item.type_of_contact)">
                        <span style='font-size: 12px !important;font-family: "SFProText-Bold" !important;' class="emergency-contact">
                          EMERGENCY CONTACT
                        </span>
                      </span>
                      <li class="mb-emergency emer-li">
                        <div class="d-flex align-items-center mtb-8">
                          <span style='font-family: "SFProDisplay-Bold" !important;' class="user_name emergency-user-name">
                            {{item.first_name}} {{item.last_name}} ({{item.relation}})</span>
                          <mat-icon mat-raised-button (click)="editContact(item)"
                            class="mat-icon material-icon basecolor cursor edit_emer" role="img" aria-hidden="true">edit
                          </mat-icon>
                        </div>

                      </li>
                      <li class="mb-emergency">
                        <div class="d-flex align-items-center">

                          <span *ngIf="item.homephone || (item.phone_numbers && item.phone_numbers.length)">
                            {{(item.phone_numbers && item.phone_numbers.length &&
                            getFirstMatchingField('Home',item.phone_numbers))?
                            getFirstMatchingField('Home',item.phone_numbers):
                            formatPhoneNumberToUS(item.homephone)}}
                            <small
                              *ngIf="item.homephone || (item.phone_numbers && item.phone_numbers.length && getFirstMatchingField('Home',item.phone_numbers))">(Home)</small>
                          </span>
                          <span class="missingField"
                            *ngIf="!item.homephone && ((item.phone_numbers && item.phone_numbers.length == 0) || !getFirstMatchingField('Home',item.phone_numbers))">
                            Add home contact
                          </span>
                        </div>
                      </li>
                      <li class="mb-emergency">
                        <div class="d-flex align-items-center">

                          <span *ngIf="item.mobilephone || (item.phone_numbers && item.phone_numbers.length)">
                            {{(item.phone_numbers && item.phone_numbers.length &&
                            getFirstMatchingField('Mobile',item.phone_numbers))?
                            getFirstMatchingField('Mobile',item.phone_numbers):
                            formatPhoneNumberToUS(item.mobilephone)}}
                            <small
                              *ngIf="item.mobilephone || (item.phone_numbers && item.phone_numbers.length && getFirstMatchingField('Mobile',item.phone_numbers))">(Mobile)</small>
                          </span>
                          <span class="missingField mb-emergency"
                            *ngIf="!item.mobilephone && ((!item.phone_numbers && !item.phone_numbers.length) || !getFirstMatchingField('Mobile',item.phone_numbers))">
                            Add mobile contact
                          </span>
                         
                        </div>
                      </li>

                      <!-- emails -->
                      <li class="mb-emergency">
                        <div class="d-flex align-items-center">
                          <span *ngIf="item.email || (item.emails && item.emails.length)">
                            <a [href]="(item.emails && item.emails.length && getFirstMatchingFieldEmails('Personal',item.emails))?
                            'mailto:'+getFirstMatchingFieldEmails('Personal',item.emails): 'mailto:'+item.email"
                              target="_top"> {{(item.emails && item.emails.length &&
                              getFirstMatchingFieldEmails('Personal',item.emails))?
                              getFirstMatchingFieldEmails('Personal',item.emails):
                              item.email}}</a>
                          </span>
                          <span class="missingField"
                            *ngIf="!item.email &&( (item.emails && item.emails.length == 0) || !getFirstMatchingFieldEmails('Personal',item.emails))">Add
                            email</span>
                        </div>
                      </li>


                      <li class="mb-emergency">
                        <div class="w-100" style="margin-bottom: 20px;">
                          <!-- <button mat-stroked-button color="primary" class="btn_main_done" [ngClass]="{'btn_main_done': true}"
                            (click)="editContact(item)"> More
                          </button> -->
                          <span class="more_label" (click)="editContact(item)">
                            More
                          </span>
                          <!-- <button mat-stroked-button color="primary" class="btn_Secondary ml-3 contact_more" (click)="editContact(item)">More</button> -->
                        </div>
                      </li>

                      <!-- billing -->
                      <!-- <li>
                        <div class="d-flex align-items-center">


                          <span class="blueAttorney" *ngIf="item.billing_contact">
                            <mat-icon>gavel</mat-icon>Billing Contact
                          </span>
                          <span class="missingField" *ngIf="!item.billing_contact">
                            <mat-icon>gavel</mat-icon>Billing Contact
                          </span>
                        </div>
                      </li> -->

                      <!-- care notification -->
                      <!-- <li>
                        <div class="d-flex align-items-center">


                          <span class="blueAttorney" *ngIf="item.can_recieve_care_info">
                            <mat-icon>gavel</mat-icon>Can receive care notifications and information
                          </span>
                          <span class="missingField" *ngIf="!item.can_recieve_care_info">
                            <mat-icon>gavel</mat-icon>Can receive care notifications and information
                          </span>
                        </div>
                      </li> -->

                    </ul>
                    <div class="d-flex w-100 emergency_toggles">
                      <span *ngIf="checkEmergencyCheckExists(item.type_of_contact)">Emergency Contact </span>
                      <span *ngIf="checkMedicalPOAExists(item.type_of_contact)">
                        <span *ngIf="checkEmergencyCheckExists(item.type_of_contact)"> &nbsp;|&nbsp;</span> POA Medical 
                      </span> 
                      <span *ngIf="checkFinancialPOAExists(item.type_of_contact)">
                        <span *ngIf="checkEmergencyCheckExists(item.type_of_contact) || checkMedicalPOAExists(item.type_of_contact)"> &nbsp;|&nbsp;</span> POA Financial 
                      </span> 
                      <span *ngIf="item.billing_contact">
                        <span *ngIf="checkEmergencyCheckExists(item.type_of_contact) || checkFinancialPOAExists(item.type_of_contact) || checkMedicalPOAExists(item.type_of_contact)"> &nbsp;|&nbsp;</span> Billing 
                      </span> 
                      <!-- IO-1446 -->
                      <!-- <span *ngIf="item.can_recieve_care_info">
                        <span *ngIf="checkEmergencyCheckExists(item.type_of_contact) || checkFinancialPOAExists(item.type_of_contact) || checkMedicalPOAExists(item.type_of_contact) || item.billing_contact"> &nbsp;|&nbsp;</span> Notify 
                      </span> -->
                    </div>
                  </div>
                  <div class="action_buttons">
                    <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                      class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                      mat-raised-button="" role="img" (click)="deleteContact(item)">remove_circle </mat-icon>
                  </div>
                </mat-card>
              </div>
            </div>
            <div class="w-100 text-center" *ngIf="emergencyArr && emergencyArr.length === 0">
              <!-- <img class="no-content-icon" src="assets/images/no-content-icon.svg"> -->
              <div class="no-content">No Emergency Contact Found</div>
            </div>
          </mat-card>

          <div class="d-flex justify-content-end mt-20 mb-10 linktoexpand" style="cursor: pointer;"
            *ngIf="!showAll && emergencyArr && emergencyArr.length > 3" (click)="showContacts()"><span>All
              Contacts</span>
          </div>
          <!-- old show hide button -->
          <!-- <div class="d-flex justify-content-end mt-20 mb-10 linktoexpand" style="cursor: pointer;"
        *ngIf="showAll && emergencyArr && emergencyArr.length > 3" (click)="hideContacts()"><span>Hide Contacts</span>
      </div> -->
        </mat-card>

        <!-- pharmacy -->
        <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
          <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom ab-MinusMargins">
            <mat-card-title class="ann_heading">Pharmacies</mat-card-title>

            <mat-form-field [ngClass]="{showHide: 'showSelectOptionPharmacy'}" class="w-50">
              <mat-label>
                Select an Unassigned Pharmacy</mat-label>
              <mat-select [(ngModel)]="pharmacy" name="pharmacy" [ngModelOptions]="{standalone: true}"
                #matselectPharmacy>
                <ngx-mat-select-search [(ngModel)]="pharmacySearch" placeholderLabel="Select Pharmacy"
                  noEntriesFoundLabel="Not Found" name="search" (keydown)="$event.stopPropagation()">
                </ngx-mat-select-search>
                <mat-option [value]="0" (click)="addPharmacyPopup()">
                  Add Pharmacy
                  <mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor pl-60" role="img"
                    aria-hidden="true">add_circle
                  </mat-icon>
                </mat-option>
                <mat-option *ngFor="let item of pharmacylist |stringFilterBy:pharmacySearch: 'name'" [value]="item"
                  (click)="assignPharmacy(pharmacy,'',$event)">
                  {{item.name}} ({{item.city?item.city:''}})
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor" role="img" aria-hidden="true"
              (click)="openselectPharmacy()">
              add_circle </mat-icon>
          </mat-card-header>

          <div class="d-flex justify-content-between form-row pt-15">
            <div class="w-100 pr-15">
              <!-- <mat-card class="border-card margin-bottom15">
            <mat-card-header>
              <mat-card-title class="ann_heading">Pharmacy</mat-card-title>
            </mat-card-header>
            <mat-card-content> -->
              <!-- <ul class="beacon-listing sec_nfc_list">
                <li *ngFor="let item of assignedPharmacy">
                  <span class="user-name ">
                    <a class="cursor">{{item.name}}</a>
                  </span>
                  <div class="d-flex justify-content-end">
                    <span>
                      <mat-icon class="removeicon basecolor" (click)="unassignPharmacy(item)">remove_circle</mat-icon>
                    </span>
                  </div>
                </li>
              </ul> -->
              <!-- <mat-form-field class="w-100">
                <mat-label>
                  Select an Unassigned Pharmacy</mat-label>
                <mat-select [(ngModel)]="pharmacy" name="pharmacy" [ngModelOptions]="{standalone: true}">
                  <ngx-mat-select-search [(ngModel)]="pharmacySearch" placeholderLabel="Select Pharmacy"
                    noEntriesFoundLabel="Not Found" name="search" (keydown)="$event.stopPropagation()">
                  </ngx-mat-select-search>
                  <mat-option *ngFor="let item of pharmacylist |stringFilterBy:pharmacySearch: 'name'" [value]="item"
                    (click)="assignPharmacy(pharmacy,'')">
                    {{item.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-card-content>
          </mat-card> -->
            </div>
            <!-- <div class="w-100 pl-15">
            </div> -->
          </div>
          <div class="selected_data pharmacy_out" *ngIf="assignedPharmacy.length">
            <div class="pharmacy_col" *ngFor="let item of assignedPharmacy;let i=index;">
              <div class="selected" [ngClass]="{ 'primary_pharmacy_border': item.isPrimary}">
                <div class="info">

                  <div class="info_cnt p-0">
                    <div class="info_im p-0">
                      <span style='font-size: 12px !important;font-family: "SFProText-Bold" !important;' *ngIf="item.isPrimary" class="primary-label">PRIMARY</span>
                    </div>
                    <div class="d-flex align-items-center p-0">
                      <h4 style='font-size: 14px !important;font-family: "SFProText-Bold" !important;'>{{item.name}} </h4>
                      <mat-icon mat-raised-button (click)="editPharmacy(item)"
                        class="mat-icon material-icon basecolor cursor edit__icon" role="img" aria-hidden="true">edit
                      </mat-icon>
                    </div>
                    <div class="d-flex custom_flex fl_size p-0">
                      <!-- <span *ngIf="item.phone" >{{item.phone}}</span> -->
                      <span class="phone_number"
                        *ngIf="item.phone || (item.phone_numbers && item.phone_numbers.length)">
                        <!-- {{(item.phone_numbers && item.phone_numbers.length)?formatPhoneNumberToUS(item.phone_numbers[0].value):formatPhoneNumberToUS(item.phone)}} -->
                        {{(item.phone_numbers && item.phone_numbers.length &&
                        getFirstMatchingField('Phone',item.phone_numbers))?getFirstMatchingField('Phone',item.phone_numbers):formatPhoneNumberToUS(item.phone)}}
                        <small *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                        getFirstMatchingField('Phone',item.phone_numbers))">(Phone)</small>

                      </span>
                      <!-- <p *ngIf="item.phone_numbers && item.phone_numbers.length">{{item.phone_numbers[0].value}}</p> -->
                    </div>
                    <div class="d-flex custom_flex fl_size p-0">
                      <span class="phone_number" *ngIf="item.fax || (item.phone_numbers && item.phone_numbers.length)">
                        <!-- {{(item.phone_numbers && item.phone_numbers.length)?formatPhoneNumberToUS(item.phone_numbers[0].value):formatPhoneNumberToUS(item.phone)}} -->
                        {{(item.phone_numbers && item.phone_numbers.length &&
                        getFirstMatchingField('Fax',item.phone_numbers))?getFirstMatchingField('Fax',item.phone_numbers):formatPhoneNumberToUS(item.Fax)}}
                        <small *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                        getFirstMatchingField('Fax',item.phone_numbers))">(Fax)</small>
                      </span>
                    </div>

                    <!-- <div class="d-flex custom_flex fl_size">
                    <span class="phone_number" *ngIf="item.office || (item.phone_numbers && item.phone_numbers.length)"> -->
                    <!-- {{(item.phone_numbers && item.phone_numbers.length)?formatPhoneNumberToUS(item.phone_numbers[0].value):formatPhoneNumberToUS(item.phone)}} -->
                    <!--   {{(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Office',item.phone_numbers))?getFirstMatchingField('Office',item.phone_numbers):formatPhoneNumberToUS(item.Office)}}
                      <small>(Office)</small>
                    </span>
                  </div>-->

                    <p *ngIf="item.address1">{{item.address1}}</p>
                    <p *ngIf="item.city && item.state && item.zip">{{item.city}}, {{item.state}} {{item.zip}}</p>
                    <!-- <p matTooltip="Demo Note"  aria-label="tooltip"> {{item.fac_address1}}</p> -->
                  </div>
                </div>
                <div class="act">
                  <mat-slide-toggle class="mr-20" [checked]="item.isPrimary" name="isPrimary" title="Make Primary Pharmacy"
                    (change)="assignUnassignPrimaryPharmacy($event.checked,item)"></mat-slide-toggle>
                  <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                    class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon"
                    mat-raised-button="" role="img" (click)="unassignPharmacy(item)">remove_circle </mat-icon>
                </div>
              </div>
            </div>
          </div>
          <div class="w-100 text-center" *ngIf="!assignedPharmacy.length">
            <!-- <img class="no-content-icon" src="assets/images/no-content-icon.svg"> -->
            <div class="no-content">No Assigned Pharmacy Found.</div>
          </div>
        </mat-card>

        <!-- physician -->
        <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
          <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom ab-MinusMargins">
            <mat-card-title class="ann_heading">Physicians</mat-card-title>
            <mat-form-field [ngClass]="{showHide: 'showSelectOptionPhysician'}" class="w-50">
              <mat-label>
                Select an Unassigned Physician</mat-label>
              <mat-select [(ngModel)]="physician" name="physician" [ngModelOptions]="{standalone: true}"
                #matselectPhysician>
                <ngx-mat-select-search [(ngModel)]="physicianSearch" placeholderLabel="Select Physician"
                  noEntriesFoundLabel="Not Found" name="search" (keydown)="$event.stopPropagation()">
                </ngx-mat-select-search>
                <mat-option [value]="0" (click)="addPhysicianPopup()">
                  Add Physician
                  <mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor pl-60" role="img"
                    aria-hidden="true">add_circle
                  </mat-icon>
                </mat-option>
                <mat-option *ngFor="let item of physicianlist |stringFilterBy:physicianSearch: 'name'" [value]="item"
                  (click)="assignPhysician(physician)">
                  {{item.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor" role="img" aria-hidden="true"
              (click)="openselectPhysician()">
              add_circle </mat-icon>
          </mat-card-header>

          <div class="selected_data pharmacy_out" *ngIf="assignedPhysician.length">
            <div class="pharmacy_col" *ngFor="let item of assignedPhysician;let i=index;">
              <div class="selected w-48" [ngClass]="{ 'primary_physician_border': item.isPrimary}">
                <div class="info">
                  <div class="info_cnt">
                    <div class="d-flex align-items-center">
                      <h4 style='font-size: 14px !important;font-family: "SFProText-Bold" !important;' *ngIf="item.name">{{item.name}} </h4>
                      <mat-icon mat-raised-button (click)="editPhysician(item)"
                        class="mat-icon material-icon basecolor cursor edit__icon" role="img" aria-hidden="true">edit
                      </mat-icon>
                    </div>
                    <p *ngIf="item.practice_name">{{item.practice_name}}</p>
                    <p *ngIf="item.medical_profession_type">{{item.medical_profession_type}}</p>
                    <p class="phone_number" *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Mobile',item.phone_numbers)) && (item.mobile || (item.phone_numbers && item.phone_numbers.length))">
                      {{(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Mobile',item.phone_numbers))?getFirstMatchingField('Mobile',item.phone_numbers):formatPhoneNumberToUS(item.mobile)}}
                      <small>(Mobile)</small>
                    </p>
                    <p class="phone_number" *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                    getFirstMatchingField('Fax',item.phone_numbers)) && (item.fax || (item.phone_numbers && item.phone_numbers.length))">
                      {{(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Fax',item.phone_numbers))?getFirstMatchingField('Fax',item.phone_numbers):formatPhoneNumberToUS(item.fax)}}
                      <small *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Fax',item.phone_numbers))">(Fax)</small>
                    </p>
                    <p class="phone_number" *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                    getFirstMatchingField('Office',item.phone_numbers)) && (item.office || (item.phone_numbers && item.phone_numbers.length))">
                      {{(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Office',item.phone_numbers))?getFirstMatchingField('Office',item.phone_numbers):formatPhoneNumberToUS(item.office)}}
                      <small *ngIf="(item.phone_numbers && item.phone_numbers.length &&
                      getFirstMatchingField('Office',item.phone_numbers))">(Office)</small>

                    </p>
                    <!-- <p *ngIf="item.phone_numbers && item.phone_numbers.length">{{item.phone_numbers[0].value}}</p> -->
                    <p *ngIf="item.email && item.show">
                      <!-- {{item.email}} -->
                      <a style="color: black !important" href="mailto:{{item.email}}">
                        {{item.email}}
                      </a>
                    </p>
                    <p *ngIf="item.address1 && item.show">{{item.address1}}</p>
                    <p *ngIf="item.city && item.state && item.zip  && item.show">{{item.city}}, {{item.state}} {{item.zip}}</p>
                    <!-- <p matTooltip="Demo Note"  aria-label="tooltip"> {{item.fac_address1}}</p> -->
                    <span *ngIf="item.phone_numbers.length > 1 || (item.phone_numbers.length && (item.email))" class="add__notes"
                      (click)="showHidePhysicianNotes(i,item.show)">
                      {{ item.show ? 'Read less' : 'Read more'}}
                    </span>
                  </div>
                </div>
                <div class="act">

                  <mat-slide-toggle class="mr-20" [checked]="item.isPrimary" name="isPrimary" title="Make Primary Physician"
                    (change)="assignUnassignPrimaryPhysician($event.checked,item)"></mat-slide-toggle>
                  <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                    class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon"
                    mat-raised-button="" role="img" (click)="unassignPhysician(item)">remove_circle </mat-icon>
                </div>
              </div>
            </div>
          </div>
          <div class="w-100 text-center" *ngIf="!assignedPhysician.length">
            <!-- <img class="no-content-icon" src="assets/images/no-content-icon.svg"> -->
            <div class="no-content">No Assigned Physician Found</div>
          </div>
          <div class="d-flex justify-content-between form-row pt-15">
            <div class="w-100 pr-15">
              <!-- <mat-card class="border-card margin-bottom15">
            <mat-card-header>
              <mat-card-title class="ann_heading">Physician</mat-card-title>
              
            </mat-card-header>
            <mat-card-content> -->

              <!-- <ul class="beacon-listing sec_nfc_list">
                <li *ngFor="let item of assignedPhysician">
                  <span class="user-name ">
                    <a class="cursor">{{item.name}}</a>
                  </span>
                  <div class="d-flex justify-content-end">
                    <span>
                      <mat-icon class="removeicon basecolor" (click)="unassignPhysician(item)">remove_circle</mat-icon>
                    </span>
                  </div>
                </li>
              </ul> -->
              <!-- <mat-form-field class="w-100">
                <mat-label>
                  Select an Unassigned Physician</mat-label>
                <mat-select [(ngModel)]="physician" name="physician" [ngModelOptions]="{standalone: true}">
                  <ngx-mat-select-search [(ngModel)]="physicianSearch" placeholderLabel="Select Physician"
                    noEntriesFoundLabel="Not Found" name="search" (keydown)="$event.stopPropagation()">
                  </ngx-mat-select-search>
                  <mat-option *ngFor="let item of physicianlist |stringFilterBy:physicianSearch: 'name'" [value]="item"
                    (click)="assignPhysician(physician)">
                    {{item.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-card-content>
          </mat-card> -->
            </div>
            <div class="w-100 pl-15">
            </div>
          </div>
        </mat-card>
        <!-- Contacts -->
      </mat-tab>

      <!-- Orders Section -->
      <mat-tab label="Orders" #tab [disabled]='isalltabidisable'>

        <ng-template matTabLabel>
          Orders
          <!-- <span *ngIf="unlinkOrderCount + unProcessedMedicationOrderCount > 0" class="badge pending">{{unlinkOrderCount
            + unProcessedMedicationOrderCount}}</span> -->
            <span *ngIf="ordersCount > 0" class="badge pending">{{ordersCount}}</span>

        </ng-template>
        <app-order-mgmt *ngIf="!orderApiCalled" [unProcessedMedicationOrderCount]="unProcessedMedicationOrderCount"></app-order-mgmt>
      </mat-tab>

      <!-- Medications and Treatments Section -->
      <mat-tab label="Medications and Treatments" #tab [disabled]='isalltabidisable'>
        <!-- Current diagnosis -->
        <!-- <mat-card class="mt-20 no_drop_shadow bdr_crd"> -->
        <app-list-med *ngIf="!medAndTreatApiCalled" [isFromResident]='isFromResident' [encResidentId]="encResidentId"></app-list-med>
        <!-- <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
          <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
            <mat-card-title class="ann_heading">Social Security Number</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            {{resident.social_security_no?formatSocialSecurity(resident.social_security_no):'No social security
            number.'}}
          </mat-card-content>
        </mat-card> -->
        <!-- <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
        <mat-card-title class="ann_heading">Current Diagnosis</mat-card-title>
      </mat-card-header>
      <div class="diseases">
        <div class="kidney no_drop_shadow bdr_crd" *ngFor="let cat of categories;let i=index">
          <h2>{{cat.name}}</h2>

          <div class="checkbox_content" *ngFor="let sub of cat?.sub;let j=index">
            <mat-checkbox color="primary" name="check_{{sub.id}}" id="check_{{sub.id}}"
              [checked]="pre_diseases.indexOf(sub.id)>-1" (change)="selectDisease(sub.id)"></mat-checkbox>
            <span>{{sub.name}}</span>
          </div>
        </div>
      </div> -->
        <!-- </mat-card> -->
        <!-- Current diagnosis -->
      </mat-tab>

      <!-- Diagnosis Section -->
      <mat-tab label="Diagnosis" #tab [disabled]='isalltabidisable'>
        <!-- Diagnosis component -->
        <mat-card class="mt-20 no_drop_shadow traking_nfc_resident">
          <app-diagnosis *ngIf="!diagnosisApiCalled" [diseaseList]="diseaseFetched"></app-diagnosis>
        </mat-card>

        <!-- <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
      <app-current-medication></app-current-medication>
    </mat-card>  -->

        <!-- <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
      <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
        <mat-card-title class="ann_heading">Primary Physician</mat-card-title>
      </mat-card-header>
      <mat-card-content >
        {{getPrimaryDoctor()}}
      </mat-card-content>
    </mat-card> -->

        <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
          <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
            <mat-card-title class="ann_heading">Physicians</mat-card-title>
          </mat-card-header>
          <div class="selected_data" *ngIf="dignosePhysician.length">
           <div class="pharmacy_col" *ngFor="let item of dignosePhysician;let i=index;">
            <div class="selected w-48"  
              [ngClass]="{ 'primary_physician_border': item.isPrimary}">
              <div class="info">
                <!-- <div class="info_cnt">
              <h4 *ngIf="item.name">{{item.name}} </h4>
              <p *ngIf="item.phone_numbers && item.phone_numbers.length">{{item.phone_numbers[0].value}}</p>
            </div> -->
                <div class="info_cnt">
                  <h4 *ngIf="item.name">{{item.name}} </h4>
                  <p *ngIf="item.practice_name">{{item.practice_name}}</p>
                  <p *ngIf="item.medical_profession_type">{{item.medical_profession_type}}</p>
                  <!-- <p *ngIf="item.mobile">{{item.mobile}}</p> -->
                  <p class="phone_number" *ngIf="(item.phone_numbers && item.phone_numbers.length)">
                    {{(item.phone_numbers && item.phone_numbers.length &&
                    getFirstMatchingField('Mobile',item.phone_numbers))?getFirstMatchingField('Mobile',item.phone_numbers):formatPhoneNumberToUS(item.mobile)}}
                    <small>(Mobile)</small>
                  </p>

                  <p class="phone_number" *ngIf="item.fax || (item.phone_numbers && item.phone_numbers.length)">
                    {{(item.phone_numbers && item.phone_numbers.length &&
                    getFirstMatchingField('Fax',item.phone_numbers))?getFirstMatchingField('Fax',item.phone_numbers):formatPhoneNumberToUS(item.fax)}}
                    <small>(Fax)</small>

                  </p>
                  <p class="phone_number" *ngIf="item.office || (item.phone_numbers && item.phone_numbers.length)">
                    {{(item.phone_numbers && item.phone_numbers.length &&
                    getFirstMatchingField('Office',item.phone_numbers))?getFirstMatchingField('Office',item.phone_numbers):formatPhoneNumberToUS(item.office)}}
                    <small>(Office)</small>

                  </p>
                  <!-- <p *ngIf="item.phone_numbers && item.phone_numbers.length">{{item.phone_numbers[0].value}}</p> -->
                  <p *ngIf="item.email">
                    <!-- {{item.email}} -->
                    <a href="mailto:{{item.email}}">
                      {{item.email}}
                    </a>
                  </p>
                  <p *ngIf="item.address1">{{item.address1}}</p>
                  <p *ngIf="item.city && item.state && item.zip">{{item.city}}, {{item.state}} {{item.zip}}</p>
                  <!-- <p matTooltip="Demo Note"  aria-label="tooltip"> {{item.fac_address1}}</p> -->
                </div>
              </div>
            </div>

            </div>
          </div>
          <div class="w-100 text-center" *ngIf="!dignosePhysician.length">
            <!-- <img class="no-content-icon" src="assets/images/no-content-icon.svg"> -->
            <div class="no-content">No Assigned Physician Found</div>
          </div>
          <div class="d-flex justify-content-between form-row pt-15">
            <div class="w-100 pr-15">
            </div>
            <div class="w-100 pl-15">
            </div>
          </div>
        </mat-card>

      </mat-tab>

      <!-- Care Notes Section -->
      <mat-tab label="Care Notes" #tab [disabled]='isalltabidisable'>
        <mat-card _ngcontent-wsq-c33="" class=" no_drop_shadow  contacts care_notes card_padding_custom pt-0">
          <mat-card class="contacts no_drop_shadow p-0">
            <mat-card-header class="d-flex justify-content-between align-items-center w-100 border-bottom">
              <!-- <mat-card-title class="ann_heading mb-0">Care Notes</mat-card-title> -->
              <mat-icon mat-raised-button (click)="openCareDialog()" class="mat-icon material-icon basecolor cursor"
              role="img" aria-hidden="true">add_circle 
            </mat-icon>
          </mat-card-header>
          <mat-card _ngcontent-lyb-c20="" class="mt-20 no_drop_shadow p-0 mat-card">
            <div class="text-center no-content-add" *ngIf="!showfaclist">
              <!-- <img class="no-content-icon-no-care" src="assets/images/no-content-icon.svg"> -->
              <div class="no-content">No Care Notes Found</div>
            </div>
          </mat-card>
            <div class="d-flex flexwrap" *ngIf="showfaclist">
              <div class="w-33 w-50 contact_info" *ngFor="let item of residentCareList;let i = index">
                <mat-card class="mt-20 border tile"
                  [ngClass]="{'height8rem':(!(item.care_note && isCareNoteTextExceed(item.care_note)))}">
                  <div class="blog_care">
                    <div class="care_Section">
                      <div class="icon_detail">
                        <div class="icon_detail" *ngFor="let img of tempcareImg">
                          <img *ngIf="img._id === item.care_id && img.image && img.image?.location != ''"
                            [src]="img.image" width="30px">
                        </div>
                        <!-- <mat-icon mat-raised-button (click)="editCareList(item)" class="mat-icon material-icon basecolor cursor" role="img" aria-hidden="true">edit </mat-icon> -->
                      </div>
                      <div class="detail_content">
                        <h6>{{item.care_name}}
                          <mat-icon mat-raised-button (click)="editCareList(item)"
                            class="mat-icon material-icon basecolor cursor" role="img" aria-hidden="true">edit
                          </mat-icon>
                        </h6>
                        <ul>
                          <li>
                            <div class="d-flex align-items-center">
                              <span>
                              </span>
                            </div>
                          </li>
                          <li>
                            <div class="d-flex align-items-center">
                              <span>
                                <p class="tile-data"
                                  [innerHTML]=" (item.care_note && isCareNoteTextExceed(item.care_note) &&
                                  !indexExistOfThisCare(i))?shortText(item.care_note) + '<small>...</small>':item.care_note | sanitizeText ">
                                </p>
                                <span class="add__notes"
                                  *ngIf="(item.care_note && isCareNoteTextExceed(item.care_note))"
                                  (click)="showHideCareNotes(i)">
                                  {{ indexExistOfThisCare(i)?'Read less':'Read more'}}
                                </span>

                                <b></b>
                              </span>
                            </div>
                          </li>
                        </ul>
                      </div>

                    </div>
                    <div class="action_buttons">
                      <mat-icon *ngIf="!editAll" _ngcontent-nru-c18="" _ngcontent-bgg-c33="" aria-hidden="true"
                        class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color"
                        mat-raised-button="" role="img" (click)="deleteCare(item)">remove_circle </mat-icon>
                    </div>
                  </div>
                </mat-card>
              </div>
            </div>
          </mat-card>
        </mat-card>
      </mat-tab>

      <!-- Schedule Section -->
      <mat-tab label="Schedule" #tab [disabled]='isalltabidisable'>
        <div class="text-center" *ngIf="!schedules || !schedules.length || schedules.length == 0">
          <div class="no-content">No Schedule Found</div>
        </div>
        <table class="listing" *ngIf="schedules.length" mat-table [dataSource]="schedules">

          <!-- <ng-container matColumnDef="no">
            <th mat-header-cell *matHeaderCellDef> No. </th>
            <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
          </ng-container> -->

          <!-- <ng-container matColumnDef="icon" >
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element" class="icon_size care_column" style=" width: 41px !important;"> <img *ngIf="element.care?.image!=''"
                [src]="element.care?.image?.location"> </td>
          </ng-container> -->

          <ng-container matColumnDef="care">
            <th mat-header-cell *matHeaderCellDef style="padding-left: 46px !important;">Care</th>
            <td mat-cell *matCellDef="let element">
              <div class="d-flex care_column ">
                <div class="icon_size" style="padding-right: 12px;">
                  <img *ngIf="element.care?.image!=''" [src]="element.care?.image?.location">
                </div>
                <div>
                  {{element.care?.name}} 
                </div>
              </div> 
            </td>
              
          </ng-container>

          <ng-container matColumnDef="start_date">
            <th mat-header-cell *matHeaderCellDef>Start date</th>
            <td mat-cell *matCellDef="let element"> {{element.start_date | date}} </td>
          </ng-container>

          <ng-container matColumnDef="end_date">
            <th mat-header-cell *matHeaderCellDef>End date</th>
            <td mat-cell *matCellDef="let element"> {{ element.end_date ? (element.end_date | date) : '-' }} </td>
          </ng-container>

          <ng-container matColumnDef="start_time">
            <th mat-header-cell *matHeaderCellDef>Start time</th>
            <td mat-cell *matCellDef="let element"> {{element.start_time }} </td>
          </ng-container>

          <ng-container matColumnDef="duration">
            <th mat-header-cell *matHeaderCellDef>End time</th>
            <td mat-cell *matCellDef="let element"> {{ element.end_time }} </td>
            <!-- <td mat-cell *matCellDef="let element"> {{ (element.start_time + (element.duration*1000)) | date:
              'shortTime' }} </td> -->
          </ng-container>

          <ng-container matColumnDef="repeat">
            <th mat-header-cell *matHeaderCellDef> Repeat </th>
            <td mat-cell *matCellDef="let element"> {{ element.repeat.replaceAll('_',' ') | titlecase }} </td>
          </ng-container>

          <ng-container matColumnDef="repeat_tenure">
            <th mat-header-cell [hidden]="true" *matHeaderCellDef> Tenure </th>
            <td mat-cell [hidden]="true" *matCellDef="let element"> {{ element.repeat_tenure ? element.repeat_tenure : 0
              }} </td>
          </ng-container>

          <ng-container matColumnDef="repeat_on">
            <th mat-header-cell *matHeaderCellDef style="width: 22%;"> Repeat on </th>
            <td mat-cell *matCellDef="let element" style="text-transform: capitalize;"> {{ element.repeat_on ?
              getWeekDays(element.repeat_on) : '-' }} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </mat-tab>

      <!-- Payers and Insurance Section -->
      <mat-tab label="Payers and Insurance" #tab [disabled]='isalltabidisable'>
        <!-- <mat-card-header class="d-flex justify-content-between align-items-center w-100 border-bottom">
           <mat-card-title class="ann_heading">Contact Information</mat-card-title> 
          <mat-icon mat-raised-button class="mat-icon material-icon basecolor cursor" role="img" aria-hidden="true">
            add_circle </mat-icon>
        </mat-card-header>
        <div class="selected_data">
          <div class="selected" *ngFor="let item of assignedInsurance;let i=index;">
            <div class="info">
              <div class="info_cnt">
                <h4 *ngIf="item.medicare">{{item.medicare}} </h4>
                <p *ngIf="item.medicare_beneficiary_id">{{item.medicare_beneficiary_id}}</p>
                <p *ngIf="item.mco_medicare_name">{{item.mco_medicare_name}}</p>
                <p *ngIf="item.insurance_name">{{item.insurance_name}}</p>
                <p *ngIf="item.insurance_policy_no">{{item.insurance_policy_no}}</p>
                <p *ngIf="item.address1">{{item.address1}}</p>
            <p *ngIf="item.city && item.state && item.zip">{{item.city}}, {{item.state}} {{item.zip}}</p> 
              </div>
            </div>
            <div class="act">

               <mat-slide-toggle [checked]="item.isPrimary" name="isPrimary" (change)="assignUnassignPrimaryPhysician($event.checked,item)"></mat-slide-toggle>
              <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon"
                mat-raised-button="" role="img">remove_circle </mat-icon>
            </div>
          </div>
        </div> -->

        <!-- <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident">
          <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
            <mat-card-title class="ann_heading">Social Security Number</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            {{resident.social_security_no?formatSocialSecurity(resident.social_security_no):'No social security
            number.'}}
          </mat-card-content>
        </mat-card> -->
        <!-- End New Design Changes Contact  -->
        <!-- Table Content Start -->
        <!-- Contacts -->
        <!-- End edit function -->
        <!-- End Care & Note Add & Edit Section-->
        <!-- Changes Made by Kaushik Begins Payers and Insurance -->

        <mat-card class="no_drop_shadow traking_nfc_resident">
          <!-- <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident"> -->
          <mat-card-header class="d-flex justify-content-between align-center w-100 border-bottom">
            <!-- <mat-card-title class="ann_heading">Payers and Insurance</mat-card-title> -->
          </mat-card-header>
          <mat-card-content>
            <div>
              <div class="ann_heading-private">Private Insurance</div>
            </div>
            <div class="d-flex justify-space-between w-100">

              <mat-form-field class="w-30 company-name-pr">
                <input matInput placeholder="Company Name" name="company_name"
                  [(ngModel)]="residentInsurance.company_name">
              </mat-form-field>

              <mat-form-field class="w-30 ml-10 policy-num-pl">
                <input matInput placeholder="Policy Number" name="policy_number"
                  [(ngModel)]="residentInsurance.policy_number">
              </mat-form-field>

            </div>
            <div class="d-flex justify-content-between">
              <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident w-30">
                <mat-card-header>
                  <mat-card-title class="ann_heading">Additional Medical Coverage</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <mat-form-field class="w-100">
                    <mat-label>Add Medical Coverage</mat-label>
                    <mat-select #medicalCoverage (selectionChange)="onMedCoverageChange($event.value)">
                      <ngx-mat-select-search [(ngModel)]="coverageSearch" placeholderLabel="Search Medical Coverage"
                        noEntriesFoundLabel="Not Found" name="covSearch"></ngx-mat-select-search>
                      <mat-option
                        *ngFor="let coverage of addsMedCoverage | stringFilterBy: coverageSearch: 'viewValue'; let i = index"
                        [value]="coverage.value">{{ coverage.viewValue }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="d-flex justify-content-between mt-10"
                    *ngFor="let medCoverage of addedCoverages; let i = index">
                    <div class="d-flex w-100">
                      <mat-form-field class="w-100">
                        <input matInput [placeholder]="medCoverage.coverage_name" [name]="medCoverage.name"
                          [(ngModel)]="medCoverage.value">
                      </mat-form-field>
                      <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                        class="w-100 mt-20 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                        mat-raised-button="" role="img" (click)="onRemove(i)">remove_circle
                      </mat-icon>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
              <mat-card class="mt-20 no_drop_shadow bdr_crd traking_nfc_resident w-70 ml-20">
                <mat-card-header>
                  <mat-card-title class="ann_heading">Payers</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <mat-form-field class="w-50">
                    <mat-label>Add a Payer</mat-label>
                    <mat-select #payr (selectionChange)="onPayerSelectionChange($event.value)">
                      <ngx-mat-select-search [(ngModel)]="payerSearch" placeholderLabel="Search Payer"
                        noEntriesFoundLabel="Not Found" name="pyrSearch"></ngx-mat-select-search>
                      <mat-option *ngFor="let payer of payers | stringFilterBy: payerSearch: 'payer'"
                        [value]="payer._id">{{ payer.payer }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="table-responsive mt-20 header-fixed-table-wrpper listing">
                    <table mat-table [dataSource]="payersDataSource" class="mat-elevation-z8">
                      <ng-container matColumnDef="payer">
                        <th mat-header-cell *matHeaderCellDef> Payer </th>
                        <td mat-cell *matCellDef="let payer"> {{payer.payer}} </td>
                      </ng-container>

                      <!-- Name Column -->
                      <ng-container matColumnDef="type">
                        <th mat-header-cell *matHeaderCellDef> Type </th>
                        <td mat-cell *matCellDef="let payer"> {{payer.type}} </td>
                      </ng-container>

                      <!-- Weight Column -->
                      <ng-container matColumnDef="rank">
                        <th mat-header-cell *matHeaderCellDef> Rank </th>
                        <td mat-cell *matCellDef="let payer"> {{payer.rank}} </td>
                      </ng-container>

                      <!-- Symbol Column -->
                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef> Action </th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                            class="w-100 mt-20 mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                            mat-raised-button="" role="img" (click)="onRemovePayer(i)">remove_circle
                          </mat-icon>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="payersColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: payersColumns;"></tr>
                    </table>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Changes Made by kaushik Ends Payers and Insurance-->

      </mat-tab>

      <!-- Activities Section -->
      <mat-tab label="Activities" #tab [disabled]='isalltabidisable'>
        <mat-card _ngcontent-wsq-c33="" class=" no_drop_shadow  contacts care_notes card_padding_custom pt-0">
          <mat-card class="contacts no_drop_shadow p-0">
            <mat-card _ngcontent-lyb-c20="" class="mt-20 no_drop_shadow p-0 mat-card ">
              <div class="text-center no-content-add" *ngIf="!showfaclist">
                <div class="no-content">No Data Found</div>
              </div>
            </mat-card>
            <div class="d-flex flexwrap" *ngIf="showfaclist">
              <div class="w-33 w-50 contact_info" *ngFor="let item of residentActivityList;let i = index">
                <mat-card class="mt-20 tile" style="width: 70%;">
                  <div class="blog_care">
                    <div class="care_Section">
                      <div class="icon_detail">
                        <div class="icon_detail">
                          <img *ngIf="item && item.image_url" [src]="item.image_url" width="230px" height="230px">
                        </div>
                      </div>
                    </div>
                    <div class="action_buttons">
                      <mat-icon *ngIf="!editAll" _ngcontent-nru-c18="" _ngcontent-bgg-c33="" aria-hidden="true"
                        class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color"
                        mat-raised-button="" role="img" (click)="deleteTagPhoto(item, i)">remove_circle </mat-icon>
                    </div>
                  </div>
                </mat-card>
              </div>
            </div>
          </mat-card>
        </mat-card>
      </mat-tab>

    </mat-tab-group>

  </mat-card>
  <!-- End resident -->
  <!--bottom buttons -->
  <div *ngIf="selectedIndexVal.value == 0 || selectedIndexVal.value == 7" class="d-flex justify-content-between"
    style="padding:50px 0;">
    <button mat-flat-button color="warn" class="mr-10 btn_cancel" (click)="cancel()" type="button">Cancel</button>
    <button [disabled]="isDoneClicked"
      *ngIf="(_commonService.checkPrivilegeModule('residents','edit') && route.params['_value']['id']) || (_commonService.checkPrivilegeModule('residents','add') && !route.params['_value']['id'])"
      mat-flat-button color="primary" class="btn_done" (click)="onSubmit(f,resident)">Done</button>
    <!-- <button mat-flat-button color="warn" (click)="cancel()">Cancel</button> -->
    <!-- <button mat-flat-button color="primary"   (click)="onSubmit(f,resident)">Done</button> -->
  </div>
</form>
<!--bottom buttons -->
<ng-template #callConfirmDialog let-data>
  <div mat-dialog-content>
    <p class="text-center mt-0">Are you sure you want to change the facility of this resident?</p>
    <p>If Resident linked then Resident will be unlinked from zone.</p>
  </div>
  <div mat-dialog-actions class="text-center">
    <button mat-flat-button (click)="onNoClick()" color="primary" class="mr-10">Cancel</button>
    <button mat-flat-button cdkFocusInitial (click)="facilityChangeConfirm(data.action,data.payload)"
      color="warn">Confirm</button>
  </div>
</ng-template>
<ng-template #confirmStatus let-data>
  <div mat-dialog-content>
    <p class="text-center mt-0">Are you sure you want to change the status of this resident?</p>
    <p>If Resident linked then Resident will be unlinked from zone.</p>
  </div>
  <div mat-dialog-actions class="text-center">
    <button mat-flat-button (click)="onCancel()" color="primary" class="mr-10">Cancel</button>
    <button mat-flat-button cdkFocusInitial (click)="facilityChangeConfirm(data.action,data.payload)"
      color="warn">Confirm</button>
  </div>
</ng-template>
<ng-template #isolationData>
  <form #isolationForm="ngForm">
    <div class="pop_heading resident_popup">
      <h3>Isolation</h3> <span class="">
        <mat-icon (click)="closeIsolationDialog()">close</mat-icon>
      </span>
    </div>
    <div class="align-items-center content_detail">
      <div class="d-flex  align-center form-row ">
        <div class="w-30 resident_popup">
          <label>Location:</label>
        </div>
        <div class="w-70 d-flex "> <span> {{resident.is_out_of_fac === false ? 'In building' : 'Out of building'}} </span>
        </div>
      </div>
      <div class="d-flex align-center form-row" *ngIf="resident.custom_isolation != ''">
        <div class="w-30 resident_popup">
          <label>Covid Isolation Days:</label>
        </div>
        <div class="w-70 d-flex  align-center"><span>{{resident.custom_isolation}}</span> </div>
      </div>
      <div class="d-flex align-center form-row" *ngIf="!resident.custom_isolation != ''">
        <div class="w-30 resident_popup">
          <label>Covid Isolation Days:</label>
        </div>
        <div class="w-70 d-flex  align-center"><span>-</span> </div>
      </div>
      <div class="d-flex  align-center form-row" *ngIf="resident['testing_status'] != ''">
        <div class="w-30 resident_popup">
          <label>Testing Status:</label>
        </div>
        <div class="w-70 d-flex  align-center"> <span>{{resident['testing_status']}} </span> </div>
      </div>
      <div class="d-flex  align-center form-row" *ngIf="!resident['testing_status'] != ''">
        <div class="w-30 resident_popup">
          <label>Testing Status:</label>
        </div>
        <div class="w-70 d-flex  align-center"> <span>-</span> </div>
      </div>
    </div>
  </form>
</ng-template>
<ng-template #openCareData>

  <form #openCareForm="ngForm">
    <div class="popup_design pop_care_note">
      <div class="ctn_carenote">
        <div class="">
          <h3>{{(editAll?"Edit":"Add")}} Care Notes</h3>
        </div>
        <div class="newrule">
          <div class="selected_data" *ngIf="this.selectedCareList.length">
            <div class="selected selected-tile" *ngFor="let careData of this.selectedCareList">
              <div class="info d-flex care-info">
                <div class="icon_detail">
                  <div class="icon_detail d-flex">
                    <img *ngIf="careData?.care?.image!=''" [src]="careData?.care?.image" width="30px">
                  </div>
                </div>
                <div class="care_content">
                  <h4>{{ careData?.care?.value }} </h4>

                </div>

                <div class="d-flex custom_flex">
                  <span *ngIf="careData?.user_id?.value"> - Assigned to: {{ careData?.user_id?.value }}</span>
                </div>
              </div>
              <!-- <div class="act">
                <mat-icon *ngIf="!editAll" _ngcontent-bgg-c33="" aria-hidden="true"
                  class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color"
                  mat-raised-button="" role="img" (click)="deleteAssignedCare(careData.care.key)">remove_circle
                </mat-icon>
              </div> -->
            </div>
          </div>
          <!-- add care input -->
          <div class="d-flex justify-content-between align-center form-row nfc_label" *ngIf="!editAll">
            <!-- <mat-form-field class="w-50 pr-15">
              <mat-label>Care</mat-label>
              <mat-select #care="ngModel" [(ngModel)]="resident.care_name" (selectionChange)="changeCare($event)"
                name="care" required>
                <ngx-mat-select-search [(ngModel)]="carSearch" placeholderLabel="Select Care"
                  noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                <mat-option *ngFor="let item of carelistData |stringFilterBy:carSearch:'name'" [value]="item._id"
                  (focus)="select(item.name,'org')">
                  {{item.name}}
                </mat-option>
              </mat-select>
            </mat-form-field> -->

            <!-- new start -->
            <mat-form-field class="w-100">
              <mat-label>Care</mat-label>
              <mat-select #care="ngModel" required [(ngModel)]="resident.care_name"
                [ngModelOptions]="{standalone: true}" (selectionChange)="changeCare($event)">
                <ngx-mat-select-search [(ngModel)]="carSearch" placeholderLabel="Select Care"
                  noEntriesFoundLabel="Not Found" name="search"></ngx-mat-select-search>
                <span *ngFor="let group of carelist |stringFilterBy:carSearch:'value'; let i = index ;">
                  <mat-optgroup [label]="group.value" *ngIf="group?.subCares && group?.subCares?.length"
                    (click)="activeToggler(i, $event)">
                    <img class="cares-image" *ngIf="group.image!='' && group?.subCares && group?.subCares?.length"
                      [src]="group.image" width="30px" />
                    <mat-icon aria-hidden="true"
                      class="material-icon basecolor cursor notranslate material-icons mat-icon-no-color cares-down-icon"
                      mat-raised-button="" role="img"
                      *ngIf="group?.subCares && group?.subCares?.length && i != activeClassIndex">expand_more
                    </mat-icon>
                    <mat-icon aria-hidden="true"
                      class="material-icon basecolor cursor notranslate material-icons mat-icon-no-color cares-down-icon"
                      mat-raised-button="" role="img"
                      *ngIf="group?.subCares && group?.subCares?.length && i === activeClassIndex">expand_less
                    </mat-icon>
                    <ng-container *ngIf="activeClassIndex != null && i === activeClassIndex">
                      <mat-option [class.active]="i === activeClassIndex" *ngFor="let subCare of group?.subCares"
                      [value]="subCare.key">
                      <img *ngIf="subCare.image!=''" [src]="subCare.image" width="30px" />
                      <span class="pl-5">{{subCare.value}}</span>
                    </mat-option>
                    </ng-container>
                  </mat-optgroup>

                  <mat-option *ngIf="!group?.subCares?.length && group.value" [class.disable]="group.hasSubCares"
                    [class.active]="i === activeClassIndex" [disabled]="group.hasSubCares" [value]="group.key">
                    <img *ngIf="group.image!=''" [src]="group.image" width="30px" />
                    <span [class.pl-33]="group.image ==''" class="pl-5">
                      {{group.value}}
                    </span>
                  </mat-option>

                </span>
              </mat-select>
            </mat-form-field>
            <!-- new ends -->
          </div>

          <!-- edit care input -->
          <!-- <div class="d-flex justify-content-between align-center form-row nfc_label" *ngIf="editAll">
            <mat-form-field class="w-50 pr-15">
              <mat-label>
                Care
              </mat-label>
              <mat-select name="careEditname" [(ngModel)]="careEditname" (selectionChange)="selectedCare(careEditname)">
                <mat-option *ngFor="let item of careEditlist" [value]="item.care_id"
                  (focus)="select(item.care_name,'care')">
                  {{item.care_name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div> -->
          <div class="justify-content-between align-center form-row nfc_label note_textarea" *ngIf="!editAll">
            <p-editor [(ngModel)]="resident.care_note" placeholder="Enter notes" name="note"
              [style]="{'height':'120px'}" required>
              <p-header>
                <span class="ql-formats">
                  <button class="ql-bold" aria-label="Bold"></button>
                  <button class="ql-italic" aria-label="Italic"></button>
                  <button class="ql-underline" aria-label="Underline"></button>
                </span>
              </p-header>
            </p-editor>

          </div>
          <div class="justify-content-between align-center form-row nfc_label note_textarea" *ngIf="editAll">
            <p-editor [(ngModel)]="careEditnote" placeholder="Enter notes" name="careEditnote"
              [style]="{'height':'120px'}" required>
              <p-header>
                <span class="ql-formats">
                  <button class="ql-bold" aria-label="Bold"></button>
                  <button class="ql-italic" aria-label="Italic"></button>
                  <button class="ql-underline" aria-label="Underline"></button>
                </span>
              </p-header>
            </p-editor>

          </div>
        </div>
      </div>
      <div class="adtime mt-20">
        <button mat-button color="basic" (click)="closeCareDialog()"
          class="cancel_btn btn_window_cancle">Cancel</button>
        <button mat-button color="primary" *ngIf="!editAll" (click)="onCareSubmit(openCareForm,resident)"
          class="done_btn btn_window_done">Done</button>
        <button mat-button color="primary" *ngIf="editAll"
          (click)="onCareEditSubmit(openCareForm,resident,careEditname,careEditnote)"
          class="done_btn btn_window_done">Done</button>
      </div>
    </div>
  </form>
</ng-template>
<ng-template #primaryPhysicianPopup>
  <div mat-dialog-content class="modal_txt">
    <p class="text-center mt-0 heading_modal">This is not permanent</p>
    <p *ngIf="first_time_popup" class="text-center mt-0">Would you like to set {{single_physician_name}} as the
      primary physician This change will replace the current primary contact if there is one. Would you like to proceed?</p>
    <p *ngIf="!first_time_popup" class="text-center mt-0">Would you like to set {{to_physician_name}} as the
      primary physician This change will replace the current primary contact if there is one. Would you like to proceed?</p>
    <!-- <p *ngIf="!first_time_popup" class="text-center mt-0">{{from_physician_name}} is currently selected as the
      residents primary physician. Would you like to change it to {{to_physician_name}}?</p> -->
  </div>
  <div mat-dialog-actions class="text-center justify-content-between mat-dialog-actions">
    <button mat-flat-button (click)="onPhysicianPopupClose()" color="primary"
      class="mr-10 btn_window_cancle">No</button>
    <button mat-flat-button cdkFocusInitial (click)="onPhysicianPopupConfirm()" color="warn"
      class="btn_window_done">Confirm</button>
  </div>
</ng-template>
<ng-template #primaryPharmacyPopup>

  <div mat-dialog-content class="modal_txt">
    <p class="text-center mt-0 heading_modal">This is not permanent</p>
    <p  *ngIf="first_time_popup_pharmacy" class="text-center mt-0">Would you like to set {{single_physician_name}} as the primary pharmacy This change will replace the current primary contact if there is one. Would you like to proceed?</p>
    <!-- <p *ngIf="!first_time_popup_pharmacy" class="text-center mt-0">{{from_pharmacy_name}} is currently selected as the
      residents primary pharmacy. Would you like to change it to {{to_pharmacy_name}}?</p> -->
    <p *ngIf="!first_time_popup_pharmacy" class="text-center mt-0">Would you like to set {{to_pharmacy_name}} as the primary pharmacy This change will replace the current primary contact if there is one. Would you like to proceed?</p>
  </div>
  <div mat-dialog-actions class="text-center justify-content-between mat-dialog-actions">
    <button mat-flat-button (click)="onPharmacyPopupClose()" color="primary" class="mr-10 btn_window_cancle">No</button>
    <button mat-flat-button cdkFocusInitial (click)="onPharmacyPopupConfirm()" color="warn"
      class="btn_window_done">Confirm</button>
  </div>

</ng-template>
<ng-template #allEmergencyContactPopup>
  <h3 class="mt-0 mb-0">
    All Contacts
  </h3>
  <div class="example-container ab-popup" cdkDropListGroup>

    <div cdkDropList [cdkDropListEnterPredicate]="dropListEnterPredicate"
      (cdkDropListDropped)="dropListDropped($event)">
    </div>
    <!-- <cdk-virtual-scroll-viewport itemSize="50" minBufferPx="200" maxBufferPx="4000" class="example-viewport"> -->
    <div cdkDropList class="w-33 contact_info" *ngFor="let item of emergencyArr; let i=index"
      [cdkDropListEnterPredicate]="dropListEnterPredicate" (cdkDropListDropped)="dropListDropped($event)">
      <mat-card cdkDrag class="mt-20 border no_drop_shadow bdr_crd" (cdkDragMoved)="dragMoved($event);">
        <ul>
          <li>
            <div class="d-flex align-items-center">
              <span class="user_name"> {{item.first_name}} {{item.last_name}} ({{item.relation}})</span>
              <mat-icon mat-raised-button (click)="editContact(item)" class="mat-icon material-icon basecolor cursor"
                role="img" aria-hidden="true">edit </mat-icon>
            </div>
            <div class="action_buttons">
              <mat-icon _ngcontent-bgg-c33="" aria-hidden="true"
                class="mat-icon material-icon basecolor cursor notranslate material-icons mat-icon-no-color cancel_icon "
                mat-raised-button="" role="img" (click)="deleteContact(item)">remove_circle </mat-icon>
            </div>
          </li>

          <li>
            <div class="d-flex align-items-center">
              <span *ngIf="item.homephone || (item.phone_numbers && item.phone_numbers.length)">
                {{(item.phone_numbers && item.phone_numbers.length && getFirstMatchingField('Home',item.phone_numbers))?
                getFirstMatchingField('Home',item.phone_numbers):
                formatPhoneNumberToUS(item.homephone)}}
                <small
                  *ngIf="item.homephone || (item.phone_numbers && item.phone_numbers.length && getFirstMatchingField('Home',item.phone_numbers))">(Home)</small>
              </span>
              <span class="missingField"
                *ngIf="!item.homephone && ((!item.phone_numbers && !item.phone_numbers.length) || !getFirstMatchingField('Home',item.phone_numbers))">
                Add home contact
              </span>
            </div>
          </li>
          <li>
            <div class="d-flex align-items-center">
              <span *ngIf="item.mobilephone || (item.phone_numbers && item.phone_numbers.length)">
                {{(item.phone_numbers && item.phone_numbers.length &&
                getFirstMatchingField('Mobile',item.phone_numbers))?
                getFirstMatchingField('Mobile',item.phone_numbers):
                formatPhoneNumberToUS(item.mobilephone)}}
                <small
                  *ngIf="item.mobilephone || (item.phone_numbers && item.phone_numbers.length && getFirstMatchingField('Mobile',item.phone_numbers))">(Mobile)</small>
              </span>
              <span class="missingField"
                *ngIf="!item.mobilephone && ((!item.phone_numbers && !item.phone_numbers.length) || !getFirstMatchingField('Mobile',item.phone_numbers))">
                Add mobile contact
              </span>
            </div>
          </li>

          <li>
            <div class="d-flex align-items-center">
              <span *ngIf="item.email || (item.emails && item.emails.length)">
                <!-- {{item.email}} -->
                <a href="mailto:{{(item.emails && item.emails.length && getFirstMatchingFieldEmails('Personal',item.emails))?
               getFirstMatchingFieldEmails('Personal',item.emails):
               item.email}}">
                  {{(item.emails && item.emails.length && getFirstMatchingFieldEmails('Personal',item.emails))?
                  getFirstMatchingFieldEmails('Personal',item.emails):
                  item.email}}
                </a>
              </span>
              <span class="missingField"
                *ngIf="!item.email &&( (!item.emails && !item.emails.length) || !getFirstMatchingFieldEmails('Personal',item.emails))">Add
                email</span>
            </div>
          </li>

          <li *ngIf="item.address1">
            <div class="d-flex align-items-center">
              <span>{{item.address1}}</span>
            </div>
          </li>
          <li *ngIf="!item.address1">
            <div class="d-flex align-items-center">
              <span class="missingField">Add address</span>
            </div>
          </li>
          <li *ngIf="item.address2">
            <div class="d-flex align-items-center">
              <span>{{item.address2}}</span>
            </div>
          </li>

          <li *ngIf="item.state">
            <div class="d-flex align-items-center">
              <span *ngIf="item.zip">{{item.state}}, {{item.city}} {{item.zip}}</span>
              <span *ngIf="!item.zip">{{item.state}}, {{item.city}}</span>
            </div>
          </li>

          <li *ngIf="!item.state">
            <div>
              <span class="missingField">Add state,city,zip code</span>
            </div>
          </li>
          <li>
            <div class="d-flex align-items-center">
              <span class="add__notes" (click)="editContact(item,'fromNote')" *ngIf="!item.notes">
                Add notes
              </span>
              <div class="notes__list">
                <span class="notes" *ngIf="item.notes && item.notes!='' && checkIndexExistsOrNot(i)" #notesText
                  [attr.id]="i">
                  <p [innerHTML]=" item.notes | sanitizeText "></p>
                </span>
                <span class="add__notes" (click)="showHideNotes(i)" *ngIf="item.notes">
                  {{checkIndexExistsOrNot(i)?'Hide notes':'View notes'}}
                </span>
              </div>
            </div>
          </li>
          <li class="mt-10">
            <span *ngIf="checkEmergencyCheckExists(item.type_of_contact)">
              <span class="emergency-contact">
                <mat-icon>warning</mat-icon>
                Emergency Contact
              </span>
            </span>
            <span *ngIf="!checkEmergencyCheckExists(item.type_of_contact)">
              <span class="missingField">
                <mat-icon class="missingField">warning</mat-icon>
                Emergency Contact
              </span>
            </span>
          </li>
          <li>
            <div class="d-flex align-items-center">
              <span class="mr-10 blueAttorney" *ngIf="checkFinancialPOAExists(item.type_of_contact)">
                <mat-icon>gavel</mat-icon>
                Power of Attorney Financial
              </span>
              <!-- <span class="missingFieldOfBox mr-10" *ngIf="!checkFinancialPOAExists(item.type_of_contact)">
                <mat-icon>gavel</mat-icon>
                Power of Attorney Financial
              </span> -->
            </div>
          </li>

          <li>
            <div class="d-flex align-items-center">
              <span class="blueAttorney" *ngIf="checkMedicalPOAExists(item.type_of_contact)">
                <mat-icon>gavel</mat-icon>
                Power of Attorney Medical
              </span>
              <!-- <span class="missingFieldOfBox" *ngIf="!checkMedicalPOAExists(item.type_of_contact)">
                <mat-icon>gavel</mat-icon>
                Power of Attorney Medical
              </span> -->
            </div>
          </li>
        </ul>
      </mat-card>
    </div>
    <!-- </cdk-virtual-scroll-viewport> -->

  </div>
  <div class=" mt-10 d-flex align-items-center justify-content-between action_btn" mat-dialog-actions>
    <button type="button" mat-button color="basic" (click)="viewAllcancel()"
      class="mr-10 cancel_btn p-0">Cancel</button>
    <button mat-button color="primary" class="done_btn p-0" cdkFocusInitial type="button"
      (click)="viewAllDoneButton()">Done</button>
  </div>
</ng-template>

<ng-template #confirmStatusChange let-data>
  <div mat-dialog-content class="confirm_modal_txt">
    <!-- <p class="text-center mt-0">Are you sure you want to change the status of this resident?</p> -->
    <p class="text-center mt-0"><span>Are you sure?</span></p>
    <p>If Resident linked then Resident will be unlinked from zone.</p>
  </div>
  <div mat-dialog-actions class="d-flex align-items-center justify-content-between action_btn">
    <button mat-flat-button (click)="onCancel()" class="mr-10 cancel_btn p-0">Cancel</button>
    <button mat-flat-button cdkFocusInitial (click)="onStatusChangeConfirm(data.action, data.payload)"
      class="done_btn p-0">Confirm</button>
  </div>
</ng-template>